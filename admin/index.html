<!DOCTYPE html>
<html lang="en">
<head>
    <script>
      window.SHC_API_BASE_URL = "https://shc33.up.railway.app/server";
    </script>
<link rel="stylesheet" href="/assets/css/tailwind.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Management Dashboard</title>
    
    <link rel="icon" href="/favicon/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W3BM2JC8');</script>
<!-- End Google Tag Manager -->
    <!-- Google tag (gtag.js) -->
    <script defer src="https://www.googletagmanager.com/gtag/js?id=AW-17534255111"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
        
            gtag('config', 'AW-17534255111');
            gtag('config', 'G-8JYPJDKSP8');
        </script>
    <!-- PDF-LIB LIBRARY FOR PDF GENERATION AND MERGING -->
    <script defer src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>


    <style>
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Space Grotesk', sans-serif;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            background: radial-gradient(circle at 12% -10%, rgba(56, 189, 248, 0.18) 0%, rgba(8, 47, 73, 0.7) 32%, rgba(2, 6, 23, 0.96) 85%);
            color: #0f172a;
            padding: 0;
        }

        .admin-shell {
            display: flex;
            min-height: 100vh;
            gap: 0;
        }

        .admin-sidebar {
            width: 260px;
            padding: 28px 20px;
            background: linear-gradient(180deg, rgba(15, 23, 42, 0.96), rgba(30, 64, 175, 0.9));
            border-right: 1px solid rgba(148, 163, 184, 0.2);
            display: flex;
            flex-direction: column;
            gap: 28px;
            position: sticky;
            top: 0;
            height: 100vh;
            z-index: 30;
        }

        .sidebar-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sidebar-logo {
            width: 42px;
            height: 42px;
            border-radius: 14px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: rgba(59, 130, 246, 0.2);
            color: #f8fafc;
            font-weight: 700;
            font-size: 16px;
            letter-spacing: 0.02em;
        }

        .sidebar-brand-title {
            display: flex;
            flex-direction: column;
        }

        .sidebar-brand-title strong {
            color: #f8fafc;
            font-size: 15px;
            font-weight: 700;
            letter-spacing: 0.02em;
        }

        .sidebar-brand-title span {
            color: rgba(226, 232, 240, 0.7);
            font-size: 12px;
        }

        .sidebar-section-title {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.18em;
            color: rgba(226, 232, 240, 0.6);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border-radius: 12px;
            color: rgba(226, 232, 240, 0.82);
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .sidebar-link:hover {
            background: rgba(148, 163, 184, 0.2);
            color: #ffffff;
        }

        .sidebar-link.active {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.5), rgba(14, 165, 233, 0.55));
            box-shadow: 0 18px 40px -30px rgba(15, 23, 42, 0.8);
            color: #ffffff;
        }

        .sidebar-card {
            padding: 16px;
            border-radius: 16px;
            background: rgba(15, 23, 42, 0.35);
            border: 1px solid rgba(148, 163, 184, 0.25);
            color: rgba(226, 232, 240, 0.78);
            font-size: 13px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .sidebar-card strong {
            color: #f8fafc;
            font-size: 14px;
        }
        
        .main-content {
            margin: 0;
            padding: 32px 28px 48px;
            color: #0f172a;
            width: 100%;
            max-width: none;
            min-height: 100vh;
            position: relative;
            flex: 1;
        }

        .main-content::before {
            content: '';
            position: absolute;
            inset: 0;
            z-index: -1;
            border-radius: 0;
            background: linear-gradient(135deg, rgba(241, 245, 249, 0.95), rgba(226, 232, 240, 0.65));
            border: none;
            box-shadow: none;
            backdrop-filter: blur(22px);
        }
        
        .admin-header {
            font-size: 24px;
            font-weight: 700;
            color: white;
            margin-bottom: 4px;
        }
        
        .admin-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            font-weight: 400;
        }
        
        .search-container {
            position: relative;
            /* Removed margin-bottom here, now controlled by header layout */
            width: min(320px, 100%);
        }
        
        .search-container input {
            width: 100%;
            padding: 10px 12px 10px 40px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            color: #0f172a;
            transition: all 0.2s ease;
        }
        
        .search-container input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .search-container i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            pointer-events: none;
        }
        
        .status-link {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            color: #475569;
            font-size: 14px;
            font-weight: 500;
            border-radius: 6px;
            transition: all 0.15s ease;
            cursor: pointer;
            margin-bottom: 2px;
            color: rgba(226, 232, 240, 0.75);
        }
        
        .status-link:hover {
            background: #f8fafc;
            color: #0f172a;
            background: rgba(148, 163, 184, 0.15);
            color: #ffffff;
        }
        
        .status-link.active {
            background: #eff6ff;
            color: #2563eb;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.35), rgba(6, 182, 212, 0.4));
            color: #ffffff;
            box-shadow: 0 12px 30px -20px rgba(59, 130, 246, 0.6);
        }
        
        .status-link i {
            margin-right: 10px;
            width: 18px;
            text-align: center;
        }

        .reoffer-parent {
            color: rgba(226, 232, 240, 0.75);
        }
        .reoffer-parent:hover {
            background: rgba(148, 163, 184, 0.15);
            color: #ffffff;
        }

        .reoffer-pricing-columns {
            display: grid;
            grid-template-columns: auto 140px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #94a3b8;
            margin-bottom: 4px;
        }

        .reoffer-pricing-columns span:last-child {
            text-align: right;
        }

        .reoffer-price-button {
            border-radius: 10px;
        }

        .reoffer-price-label {
            font-weight: 600;
            color: #0f172a;
        }

        .reoffer-price-amount {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            color: #0f172a;
        }
        
        .top-nav {
            position: sticky;
            top: -16px;
            z-index: 40;
            margin: -32px -28px 28px -28px;
            padding: 22px 28px;
            border-radius: 26px 26px 22px 22px;
            background: linear-gradient(120deg, rgba(15, 23, 42, 0.9), rgba(30, 64, 175, 0.78), rgba(2, 132, 199, 0.7));
            border: 1px solid rgba(148, 163, 184, 0.28);
            backdrop-filter: blur(22px);
            box-shadow: 0 24px 60px -48px rgba(15, 23, 42, 0.85);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 24px;
        }

        /* Adjusted top-nav h1/p style to account for new layout */
        .top-nav > div:first-child {
            flex-grow: 1;
            padding-right: 20px;
        }
        
        .top-nav h1 {
            font-size: 26px;
            font-weight: 700;
            color: #f8fafc;
            letter-spacing: -0.02em;
        }

        .top-nav p {
            color: rgba(226, 232, 240, 0.75);
            font-size: 13px;
            margin-top: 2px;
            line-height: 1.5;
            max-width: 520px;
        }

        .admin-subnav {
            margin-top: 14px;
            display: inline-flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .admin-subnav__link {
            padding: 6px 12px;
            border-radius: 9999px;
            background: rgba(255, 255, 255, 0.08);
            color: rgba(226, 232, 240, 0.85);
            font-size: 13px;
            font-weight: 600;
            text-decoration: none;
            transition: background 0.2s ease, color 0.2s ease;
        }

        .admin-subnav__link:hover {
            background: rgba(255, 255, 255, 0.16);
            color: #ffffff;
        }

        .admin-subnav__link--active {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.45), rgba(14, 165, 233, 0.45));
            color: #ffffff;
        }

        .top-nav-actions {
            display: grid;
            grid-template-columns: minmax(220px, 1.2fr) repeat(2, minmax(150px, 1fr));
            align-items: center;
            gap: 14px;
            min-width: 340px;
        }

        .top-nav-actions .quick-stat {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
            color: rgba(226, 232, 240, 0.82);
            padding: 8px 10px;
            border-radius: 12px;
            background: rgba(15, 23, 42, 0.25);
            border: 1px solid rgba(148, 163, 184, 0.2);
        }

        .quick-stat strong {
            font-size: 16px;
            font-weight: 700;
            color: #f8fafc;
        }

        .admin-layout-section {
            background: rgba(248, 250, 252, 0.82);
            border: 1px solid rgba(148, 163, 184, 0.25);
            border-radius: 18px;
            padding: 18px 20px;
            box-shadow: 0 18px 40px -32px rgba(15, 23, 42, 0.35);
            backdrop-filter: blur(12px);
        }

        .filters-panel {
            display: grid;
            gap: 14px;
            margin-bottom: 28px;
        }
        
        .insight-strip {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 24px;
        }

        .insight-pill {
            flex: 1 1 180px;
            min-width: 180px;
            background: linear-gradient(135deg, rgba(148, 163, 184, 0.18), rgba(30, 64, 175, 0.28));
            border: 1px solid rgba(148, 163, 184, 0.35);
            color: #f8fafc;
            border-radius: 18px;
            padding: 18px 20px;
            display: flex;
            flex-direction: column;
            gap: 6px;
            box-shadow: 0 18px 40px -32px rgba(15, 23, 42, 0.5);
            transition: transform 0.25s ease, box-shadow 0.25s ease;
        }

        .insight-pill:hover {
            transform: translateY(-4px);
            box-shadow: 0 35px 80px -35px rgba(15, 23, 42, 0.65);
        }

        .insight-pill .label {
            font-size: 12px;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: rgba(226, 232, 240, 0.78);
            font-weight: 600;
        }

        .insight-pill .value {
            font-size: 32px;
            font-weight: 700;
            line-height: 1;
        }

        .insight-pill .subtext {
            font-size: 12px;
            color: rgba(226, 232, 240, 0.7);
        }

        .insight-pill-link {
            text-decoration: none;
            color: inherit;
            position: relative;
            display: inline-flex;
            flex-direction: column;
        }

        .insight-pill-link i {
            font-size: 16px;
            margin-top: auto;
            opacity: 0.75;
            align-self: flex-end;
        }

        .filter-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin: 0;
            align-items: center;
        }

        .filter-chip {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.35);
            background: rgba(255, 255, 255, 0.55);
            color: #1f2937;
            font-size: 13px;
            font-weight: 600;
            letter-spacing: 0.02em;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 10px 30px -22px rgba(15, 23, 42, 0.4);
            --dot-color: rgba(59, 130, 246, 0.6);
            --dot-shadow: rgba(59, 130, 246, 0.12);
        }

        .filter-chip .dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: var(--dot-color);
            box-shadow: 0 0 0 4px var(--dot-shadow);
        }

        .filter-chip.active {
            border-color: rgba(59, 130, 246, 0.65);
            background: linear-gradient(120deg, rgba(59, 130, 246, 0.18), rgba(56, 189, 248, 0.22));
            color: #0f172a;
            box-shadow: 0 12px 32px -20px rgba(37, 99, 235, 0.75);
        }

        .filter-chip:hover {
            transform: translateY(-1px);
            border-color: rgba(59, 130, 246, 0.55);
        }

        .promo-filter-panel {
            margin: 0;
            padding: 14px 18px;
            border-radius: 16px;
            background: rgba(15, 23, 42, 0.55);
            border: 1px solid rgba(148, 163, 184, 0.25);
            display: flex;
            flex-wrap: wrap;
            gap: 14px;
            align-items: center;
            color: #f8fafc;
        }

        .promo-filter-panel label {
            font-size: 12px;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            font-weight: 700;
            color: rgba(226, 232, 240, 0.8);
        }

        .promo-filter-panel select {
            border-radius: 999px;
            border: 1px solid rgba(248, 250, 252, 0.4);
            background: rgba(255, 255, 255, 0.9);
            color: #0f172a;
            padding: 8px 16px;
            font-weight: 600;
            min-width: 220px;
            box-shadow: 0 10px 30px -20px rgba(15, 23, 42, 0.65);
        }

        .promo-filter-panel small {
            font-size: 12px;
            color: rgba(248, 250, 252, 0.8);
        }

        @media (max-width: 640px) {
            .promo-filter-panel {
                flex-direction: column;
                align-items: flex-start;
            }

            .promo-filter-panel select {
                width: 100%;
            }
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .analytics-card {
            background: rgba(255, 255, 255, 0.82);
            border-radius: 18px;
            border: 1px solid rgba(148, 163, 184, 0.3);
            box-shadow: 0 18px 40px -32px rgba(15, 23, 42, 0.4);
            padding: 20px 20px 22px;
            backdrop-filter: blur(16px);
            display: flex;
            flex-direction: column;
            gap: 12px;
            min-height: 0;
        }

        .site-analytics-section {
            margin-bottom: 36px;
            padding: 26px 28px;
            border-radius: 24px;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.82), rgba(30, 64, 175, 0.38));
            border: 1px solid rgba(148, 163, 184, 0.28);
            box-shadow: 0 35px 80px -60px rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(20px);
        }

        .site-analytics-header {
            display: flex;
            flex-wrap: wrap;
            align-items: flex-start;
            justify-content: space-between;
            gap: 18px;
            margin-bottom: 22px;
        }

        .site-analytics-header h2 {
            font-size: 22px;
            font-weight: 700;
            color: #f8fafc;
            margin-bottom: 4px;
        }

        .site-analytics-header p {
            color: rgba(226, 232, 240, 0.78);
            font-size: 13px;
            max-width: 520px;
        }

        .site-analytics-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
        }

        .site-analytics-controls select,
        .site-analytics-controls input {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.4);
            border-radius: 10px;
            color: #f8fafc;
            font-size: 13px;
            padding: 10px 12px;
            min-width: 120px;
        }

        .site-analytics-controls select:focus,
        .site-analytics-controls input:focus {
            outline: none;
            border-color: rgba(59, 130, 246, 0.85);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.25);
        }

        .analytics-refresh-button {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 10px 16px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            background: linear-gradient(120deg, rgba(59, 130, 246, 0.85), rgba(45, 212, 191, 0.85));
            color: #0f172a;
            font-weight: 600;
            box-shadow: 0 18px 40px -28px rgba(59, 130, 246, 0.85);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .analytics-refresh-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 24px 50px -28px rgba(59, 130, 246, 0.9);
        }

        .analytics-refresh-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .analytics-refresh-button.is-loading i {
            animation: analytics-spin 0.8s linear infinite;
        }

        .site-analytics-controls label.analytics-autorefresh-toggle {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: rgba(226, 232, 240, 0.85);
            cursor: pointer;
        }

        .site-analytics-controls label.analytics-autorefresh-toggle input {
            accent-color: #38bdf8;
        }

        .analytics-status {
            font-size: 12px;
            color: rgba(226, 232, 240, 0.75);
        }

        .analytics-status.analytics-status--error {
            color: #fca5a5;
        }

        .analytics-status.analytics-status--loading {
            color: #fde68a;
        }

        .analytics-kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 18px;
            margin-bottom: 24px;
        }

        .analytics-kpi-card {
            background: rgba(15, 23, 42, 0.55);
            border: 1px solid rgba(148, 163, 184, 0.32);
            border-radius: 18px;
            padding: 18px 20px;
            display: flex;
            flex-direction: column;
            gap: 6px;
            color: #f8fafc;
            box-shadow: 0 24px 60px -48px rgba(8, 47, 73, 0.65);
        }

        .analytics-kpi-card .label {
            font-size: 11px;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: rgba(148, 163, 184, 0.8);
        }

        .analytics-kpi-card .value {
            font-size: 30px;
            font-weight: 700;
        }

        .analytics-kpi-card .subtext {
            font-size: 12px;
            color: rgba(148, 163, 184, 0.75);
        }

        .analytics-main-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
        }

        .analytics-top-table-wrapper {
            overflow-x: auto;
        }

        .analytics-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .analytics-table thead th {
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 0.08em;
            color: #475569;
            padding: 10px 12px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.3);
        }

        .analytics-table tbody td {
            padding: 10px 12px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.18);
            color: #0f172a;
        }

        .analytics-table tbody tr:last-child td {
            border-bottom: none;
        }

        .analytics-table .progress-bar {
            position: relative;
            height: 6px;
            border-radius: 999px;
            background: rgba(148, 163, 184, 0.2);
            overflow: hidden;
        }

        .analytics-table .progress-bar span {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.75), rgba(14, 165, 233, 0.75));
            border-radius: inherit;
        }

        .analytics-share-label {
            font-size: 12px;
            color: #475569;
            font-weight: 600;
            margin-top: 6px;
        }

        .analytics-live-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .analytics-live-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 14px;
            padding: 10px 12px;
            background: rgba(148, 163, 184, 0.12);
            color: #0f172a;
        }

        .analytics-live-item span {
            font-size: 13px;
            color: #475569;
        }

        .analytics-live-item strong {
            font-size: 15px;
            color: #0f172a;
        }

        .analytics-empty-state {
            font-size: 13px;
            color: #64748b;
        }

        @keyframes analytics-spin {
            to {
                transform: rotate(360deg);
            }
        }

        .chart-wrapper {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 168px;
            max-height: 180px;
        }

        .chart-wrapper--trend {
            padding: 0 0 8px;
        }

        .chart-wrapper--pie {
            width: min(220px, 100%);
            height: 190px;
            margin: 0 auto 0;
        }

        .chart-wrapper canvas {
            width: 100% !important;
            height: 100% !important;
        }

        .analytics-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 16px;
        }

        .analytics-card-header h3 {
            font-size: 18px;
            font-weight: 700;
            color: #0f172a;
            margin-bottom: 2px;
        }

        .analytics-card-header p {
            font-size: 13px;
            color: #475569;
        }

        .analytics-card-metric {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 4px;
            min-width: 120px;
        }

        .analytics-card-metric .metric-value {
            font-size: 28px;
            font-weight: 700;
            color: #0f172a;
        }

        .analytics-card-metric .metric-label {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .analytics-conversion-recent {
            margin-top: 18px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .analytics-conversion-item {
            border: 1px solid rgba(148, 163, 184, 0.28);
            border-radius: 12px;
            padding: 12px 14px;
            background: rgba(248, 250, 252, 0.7);
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .analytics-conversion-item h4 {
            margin: 0;
            font-size: 14px;
            font-weight: 600;
            color: #0f172a;
        }

        .analytics-conversion-item time {
            font-size: 12px;
            color: #64748b;
        }

        .analytics-conversion-item span {
            font-size: 13px;
            color: #0f172a;
            word-break: break-word;
        }

        .operations-highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .brand-trust-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 32px;
            padding: 20px;
            border-radius: 18px;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.78), rgba(30, 64, 175, 0.35));
            border: 1px solid rgba(148, 163, 184, 0.25);
            box-shadow: 0 35px 90px -60px rgba(15, 23, 42, 0.85);
        }

        .brand-card {
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 12px;
            padding: 18px 22px;
            border-radius: 16px;
            background: rgba(15, 23, 42, 0.55);
            border: 1px solid rgba(148, 163, 184, 0.25);
            color: rgba(226, 232, 240, 0.92);
        }

        .brand-card h3 {
            font-size: 16px;
            font-weight: 700;
            letter-spacing: 0.01em;
            color: #e2e8f0;
        }

        .brand-card p {
            font-size: 14px;
            line-height: 1.5;
            color: rgba(203, 213, 225, 0.85);
        }

        .brand-logo-strip {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .brand-logo-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 14px;
            border-radius: 12px;
            background: rgba(226, 232, 240, 0.08);
            border: 1px solid rgba(148, 163, 184, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .brand-logo-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 18px 30px -20px rgba(148, 163, 184, 0.55);
            background: rgba(226, 232, 240, 0.12);
        }

        .brand-logo-link img {
            display: block;
            height: auto;
        }

        .trustpilot-stars {
            max-width: 140px;
            height: auto;
        }

        .admin-footer {
            margin-top: 48px;
            padding: 24px 28px;
            border-radius: 20px;
            background: rgba(15, 23, 42, 0.72);
            border: 1px solid rgba(148, 163, 184, 0.2);
            color: rgba(226, 232, 240, 0.78);
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
        }

        .admin-footer-links {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            font-size: 13px;
        }

        .admin-footer-links a {
            color: #38bdf8;
            text-decoration: none;
            font-weight: 500;
        }

        .admin-footer-links a:hover {
            text-decoration: underline;
        }

        .admin-footer-logos {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .admin-footer-copy {
            display: flex;
            flex-direction: column;
            gap: 4px;
            font-size: 13px;
            color: rgba(226, 232, 240, 0.75);
        }

        .admin-footer-copy strong {
            font-size: 15px;
            letter-spacing: 0.01em;
            color: #f8fafc;
        }

        .admin-footer-copy span {
            color: rgba(226, 232, 240, 0.68);
        }

        .operations-card {
            background: rgba(248, 250, 252, 0.88);
            border-radius: 18px;
            border: 1px solid rgba(148, 163, 184, 0.28);
            box-shadow: 0 22px 60px -42px rgba(15, 23, 42, 0.5);
            padding: 20px 22px;
            display: flex;
            flex-direction: column;
            gap: 16px;
            backdrop-filter: blur(14px);
        }

        .operations-card-header h3 {
            font-size: 17px;
            font-weight: 700;
            color: #0f172a;
        }

        .operations-card-header p {
            font-size: 13px;
            color: #475569;
            margin-top: 4px;
        }

        .operations-card-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .operations-card-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            padding: 12px 14px;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.75);
            border: 1px solid rgba(148, 163, 184, 0.24);
        }

        .operations-card-list li.empty {
            justify-content: center;
            color: #64748b;
            font-weight: 600;
        }

        .watchlist-meta {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .watchlist-order-id {
            font-weight: 700;
            font-size: 14px;
            color: #1e293b;
        }

        .watchlist-status {
            font-size: 12px;
            font-weight: 600;
            color: #2563eb;
        }

        .watchlist-age {
            font-size: 12px;
            color: #475569;
        }

        .watchlist-view-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            border-radius: 999px;
            border: 1px solid rgba(59, 130, 246, 0.4);
            color: #1d4ed8;
            background: rgba(59, 130, 246, 0.12);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .watchlist-view-btn:hover {
            background: rgba(59, 130, 246, 0.18);
            border-color: rgba(59, 130, 246, 0.55);
            color: #1e40af;
        }

        .quick-links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
        }

        .quick-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 14px;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.24);
            font-weight: 600;
            font-size: 13px;
            color: #0f172a;
            text-decoration: none;
            transition: transform 0.18s ease, box-shadow 0.18s ease;
        }

        .quick-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px -20px rgba(15, 23, 42, 0.45);
            color: #1d4ed8;
        }

        .quick-link i {
            color: #2563eb;
            font-size: 15px;
        }

        .mobile-quick-actions {
            display: none;
            margin: 0 0 24px;
            padding: 18px;
            border-radius: 18px;
            background: rgba(15, 23, 42, 0.85);
            border: 1px solid rgba(148, 163, 184, 0.3);
            box-shadow: 0 24px 60px -36px rgba(15, 23, 42, 0.6);
            flex-direction: column;
            gap: 16px;
        }

        .mobile-search {
            position: relative;
        }

        .mobile-search input {
            width: 100%;
            padding: 12px 12px 12px 40px;
            border-radius: 12px;
            border: none;
            background: rgba(255, 255, 255, 0.92);
            font-size: 14px;
            color: #0f172a;
        }

        .mobile-search i {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
        }

        .mobile-stat-row {
            display: flex;
            gap: 12px;
        }

        .mobile-stat {
            flex: 1;
            background: rgba(255, 255, 255, 0.12);
            border: 1px solid rgba(148, 163, 184, 0.28);
            border-radius: 14px;
            padding: 12px 14px;
            color: rgba(248, 250, 252, 0.9);
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .mobile-stat span {
            font-size: 12px;
            letter-spacing: 0.02em;
            text-transform: uppercase;
            color: rgba(226, 232, 240, 0.72);
        }

        .mobile-stat strong {
            font-size: 18px;
        }

        .trend-delta {
            font-size: 14px;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 999px;
            background: rgba(148, 163, 184, 0.12);
            border: 1px solid rgba(148, 163, 184, 0.4);
            color: #1e293b;
        }

        .trend-delta.trend-up {
            background: rgba(34, 197, 94, 0.12);
            border-color: rgba(34, 197, 94, 0.35);
            color: #15803d;
        }

        .trend-delta.trend-down {
            background: rgba(248, 113, 113, 0.12);
            border-color: rgba(248, 113, 113, 0.4);
            color: #b91c1c;
        }

        .trend-delta.trend-neutral {
            background: rgba(148, 163, 184, 0.12);
            border-color: rgba(148, 163, 184, 0.4);
            color: #1e293b;
        }

        .status-breakdown-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 8px 0 0;
            padding: 0;
            list-style: none;
        }

        .status-breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 14px;
            border-radius: 14px;
            border: 1px solid transparent;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.2s ease;
        }

        .status-breakdown-item:hover {
            background: rgba(59, 130, 246, 0.08);
            transform: translateY(-1px);
        }

        .status-breakdown-item.active {
            border-color: rgba(59, 130, 246, 0.45);
            background: rgba(59, 130, 246, 0.12);
        }

        .status-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-label {
            font-size: 13px;
            font-weight: 600;
            color: #1f2937;
        }

        .status-count {
            font-size: 14px;
            font-weight: 700;
            color: #0f172a;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 999px;
            box-shadow: 0 0 0 4px rgba(148, 163, 184, 0.18);
        }

        .status-dot-all { background: #38bdf8; }
        .status-dot-pending { background: #6366f1; }
        .status-dot-printing { background: #8b5cf6; }
        .status-dot-kit-sent { background: #f97316; }
        .status-dot-kit-on-the-way-to-customer { background: #f59e0b; }
        .status-dot-kit-delivered { background: #10b981; }
        .status-dot-kit-on-the-way-to-us { background: #0f766e; }
        .status-dot-delivered-to-us { background: #0d9488; }
        .status-dot-label { background: #f59e0b; }
        .status-dot-emailed { background: #38bdf8; }
        .status-dot-phone-on-the-way { background: #0ea5e9; }
        .status-dot-received { background: #0ea5e9; }
        .status-dot-completed { background: #22c55e; }
        .status-dot-reoffer-pending { background: #facc15; }
        .status-dot-reoffer-accepted { background: #14b8a6; }
        .status-dot-reoffer-declined { background: #ef4444; }
        .status-dot-return { background: #64748b; }
        .status-dot-cancelled { background: #94a3b8; }

        @media (max-width: 768px) {
            .insight-strip {
                flex-direction: column;
            }
            .insight-pill {
                width: 100%;
            }
            .analytics-grid {
                grid-template-columns: 1fr;
            }
        }
        .accent-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-top: 8px;
        }
        
        .orders-table-container {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.78);
            border: 1px solid rgba(148, 163, 184, 0.25);
            box-shadow: 0 18px 40px -32px rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(18px);
            position: relative;
        }

        .orders-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            padding: 18px 20px 12px;
        }
        .orders-toolbar-actions {
            display: grid;
            align-items: center;
            gap: 12px;
            grid-template-columns: minmax(260px, 1.2fr) minmax(260px, 1fr);
        }

        .tracking-refresh-controls {
            display: grid;
            align-items: center;
            gap: 8px;
            grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
        }

        .tracking-refresh-button {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 13px;
            color: #1f2937;
            border: 1px solid rgba(148, 163, 184, 0.45);
            cursor: pointer;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 8px 18px rgba(15, 23, 42, 0.12);
            transition: background-color 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
        }

        .tracking-refresh-button i {
            font-size: 14px;
        }

        .tracking-refresh-button:disabled {
            opacity: 0.65;
            cursor: not-allowed;
            box-shadow: none;
        }

        .tracking-refresh-button.tracking-refresh-kit {
            background: rgba(29, 78, 216, 0.1);
            color: #1d4ed8;
            border-color: rgba(29, 78, 216, 0.4);
        }

        .tracking-refresh-button.tracking-refresh-kit:hover:not(:disabled) {
            background: rgba(30, 64, 175, 0.18);
            box-shadow: 0 10px 20px rgba(30, 64, 175, 0.18);
        }

        .tracking-refresh-button.tracking-refresh-email {
            background: rgba(13, 148, 136, 0.12);
            color: #0f766e;
            border-color: rgba(13, 148, 136, 0.4);
            box-shadow: 0 8px 18px rgba(15, 118, 110, 0.14);
        }

        .tracking-refresh-button.tracking-refresh-email:hover:not(:disabled) {
            background: rgba(13, 148, 136, 0.2);
            box-shadow: 0 10px 20px rgba(13, 148, 136, 0.22);
        }

        .bulk-status-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            border-radius: 12px;
            background: rgba(241, 245, 249, 0.7);
            border: 1px solid rgba(148, 163, 184, 0.25);
            flex-wrap: wrap;
        }

        .bulk-status-select {
            min-width: 200px;
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            background: white;
            font-size: 13px;
            color: #0f172a;
        }

        .bulk-status-apply {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 10px;
            border: 1px solid rgba(34, 197, 94, 0.35);
            background: linear-gradient(120deg, rgba(34, 197, 94, 0.15), rgba(16, 185, 129, 0.18));
            color: #047857;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .bulk-status-apply:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .bulk-status-note {
            font-size: 12px;
            color: #475569;
            font-weight: 500;
        }

        .bulk-selection-count {
            font-size: 12px;
            color: #1e293b;
            font-weight: 600;
        }

        .view-controls {
            display: flex;
            align-items: center;
            gap: 14px;
            flex-wrap: wrap;
        }

        .density-toggle {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.35);
            background: rgba(248, 250, 252, 0.85);
            color: #1f2937;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .density-toggle input {
            accent-color: #2563eb;
        }

        .density-toggle:hover {
            border-color: rgba(59, 130, 246, 0.45);
            box-shadow: 0 8px 20px -16px rgba(37, 99, 235, 0.6);
        }

        .orders-table-header {
            font-size: 18px;
            font-weight: 600;
            color: #0f172a;
            padding: 18px 20px;
            border-bottom: 1px solid #e2e8f0;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(14, 165, 233, 0.85));
            color: #f8fafc;
            border-bottom: 1px solid rgba(148, 163, 184, 0.25);
        }

        .orders-table-wrapper {
            overflow-x: auto;
            border-top: 1px solid rgba(148, 163, 184, 0.18);
        }

        table.orders-table {
            width: 100%;
            min-width: 960px;
            border-collapse: separate;
            border-spacing: 0 12px;
        }

        .orders-table thead th {
            text-align: left;
            font-size: 11px;
            letter-spacing: 0.16em;
            text-transform: uppercase;
            color: #475569;
            padding: 14px 18px;
            background: rgba(241, 245, 249, 0.7);
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
        }

        .orders-table thead th.select-column,
        .orders-table tbody td.select-column {
            width: 44px;
            text-align: center;
        }

        .orders-table tbody td.select-column {
            padding: 16px 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .order-select-checkbox {
            width: 18px;
            height: 18px;
            accent-color: #2563eb;
            cursor: pointer;
        }

        .orders-table tbody td {
            padding: 16px 18px;
            font-size: 14px;
            color: #0f172a;
            border-bottom: none;
            background: rgba(255, 255, 255, 0.92);
        }

        .orders-table tbody tr:last-child td {
            border-bottom: none;
        }

        .orders-table tbody tr:hover {
            background: transparent;
        }

        .orders-table tbody td:first-child {
            border-top-left-radius: 16px;
            border-bottom-left-radius: 16px;
        }

        .orders-table tbody td:last-child {
            border-top-right-radius: 16px;
            border-bottom-right-radius: 16px;
            text-align: right;
        }

        .pagination-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            border-top: 1px solid rgba(148, 163, 184, 0.2);
            background: rgba(248, 250, 252, 0.8);
        }

        .pagination-controls.hidden {
            display: none;
        }

        .pagination-actions {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        .pagination-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            border-radius: 10px;
            border: 1px solid rgba(59, 130, 246, 0.35);
            background: white;
            color: #1d4ed8;
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-button:not(:disabled):hover {
            box-shadow: 0 12px 24px -18px rgba(37, 99, 235, 0.5);
            transform: translateY(-1px);
        }

        .pagination-pages {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .pagination-page-button {
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid rgba(148, 163, 184, 0.45);
            background: white;
            color: #1e293b;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination-page-button:hover:not(:disabled) {
            background: #2563eb;
            color: #ffffff;
            border-color: #2563eb;
        }

        .pagination-page-button.active {
            background: #2563eb;
            color: #ffffff;
            border-color: #2563eb;
            cursor: default;
        }

        .pagination-page-button:disabled {
            opacity: 0.6;
            cursor: default;
        }

        .pagination-ellipsis {
            font-size: 13px;
            font-weight: 600;
            color: #94a3b8;
        }

        .pagination-info {
            font-size: 13px;
            font-weight: 600;
            color: #475569;
        }

        #no-orders-message {
            padding: 24px;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
            color: #64748b;
        }

        #no-orders-message.hidden {
            display: none;
        }

        @media (max-width: 1024px) {
            table.orders-table {
                min-width: 720px;
            }

            .brand-trust-section {
                grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
                padding: 18px;
            }

            .admin-footer {
                flex-direction: column;
                align-items: flex-start;
            }

            .admin-shell {
                flex-direction: column;
            }

            .admin-sidebar {
                width: 100%;
                height: auto;
                position: relative;
                border-right: none;
                border-bottom: 1px solid rgba(148, 163, 184, 0.2);
            }

            .main-content {
                padding: 24px 20px 40px;
            }

            .order-modal-body {
                grid-template-columns: 1fr;
            }
        }

        .user-id-badge {
            display: none;
        }
        
        .floating-chat-btn {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6366F1 0%, #3b82f6 100%);
            color: white;
            border: none;
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .floating-chat-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 32px rgba(99, 102, 241, 0.5);
        }
        
        .floating-chat-btn .unread-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #ef4444;
            color: white;
            font-size: 12px;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 12px;
            min-width: 24px;
            text-align: center;
        }
        
        .notification-bell {
            position: relative;
            cursor: pointer;
            color: #64748b;
            font-size: 20px;
            transition: color 0.2s ease;
            color: rgba(226, 232, 240, 0.75);
        }
        
        .notification-bell:hover {
            color: #3b82f6;
            color: #ffffff;
        }
        
        .notification-bell .badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: #ef4444;
            color: white;
            font-size: 10px;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
        }
        
        .chat-dashboard-btn {
            display: none; /* Removed as requested */
        }
        
        .logout-btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #f87171, #ef4444);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 12px 24px -16px rgba(239, 68, 68, 0.6);
        }

        .logout-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 16px 30px -14px rgba(239, 68, 68, 0.7);
        }
        
        .time-display {
            font-size: 14px;
            color: rgba(226, 232, 240, 0.75);
            font-weight: 500;
        }

        .orders-toolbar-note {
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
        }

        #orders-table-body {
            background: transparent;
        }
        #orders-table-body tr {
            background: transparent;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 12px 28px -26px rgba(15, 23, 42, 0.55);
        }
        #orders-table-body tr:nth-child(even) {
            background: transparent;
        }
        #orders-table-body tr:hover {
            transform: translateY(-2px);
            box-shadow: 0 18px 35px -28px rgba(15, 23, 42, 0.45);
        }

        #orders-table-body.density-compact td {
            padding-top: 10px !important;
            padding-bottom: 10px !important;
            font-size: 13px;
        }

        #orders-table-body.density-compact .status-bubble {
            transform: scale(0.96);
        }
        
        @media (max-width: 768px) {
            body {
                padding: 0;
            }
            .main-content {
                margin: 0;
                padding: 20px 16px 40px;
            }
            .main-content::before {
                border-radius: 0;
            }
            .top-nav {
                display: none;
            }
            .mobile-quick-actions {
                display: flex;
            }
            .admin-layout-section {
                padding: 16px;
            }
            .filters-panel {
                margin-bottom: 24px;
            }
            .orders-toolbar-actions {
                grid-template-columns: 1fr;
            }
            .tracking-refresh-controls {
                grid-template-columns: 1fr;
            }
            .filter-bar {
                gap: 8px;
                flex-wrap: wrap;
            }
            .filter-chip {
                flex: 1 1 calc(50% - 8px);
                justify-content: center;
            }
            .insight-strip {
                flex-direction: column;
            }
            .insight-pill {
                width: 100%;
            }
            .analytics-grid {
                grid-template-columns: 1fr;
            }
            .brand-trust-section {
                margin-top: 24px;
                padding: 16px;
            }
            .brand-card {
                padding: 16px 18px;
            }
            .operations-highlights {
                grid-template-columns: 1fr;
            }
            .orders-toolbar {
                flex-direction: column;
                align-items: stretch;
            }
            .view-controls {
                width: 100%;
                justify-content: space-between;
            }
            .floating-chat-btn {
                width: 56px;
                height: 56px;
                bottom: 16px;
                right: 16px;
                font-size: 20px;
            }
            .admin-footer {
                padding: 20px;
                gap: 12px;
            }
        }
        
        .submenu-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
        
        .submenu-container.open {
            max-height: 200px;
        }
        
        .status-bubble {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-bubble-text {
            display: block;
        }
        
        .status-bubble-subtext {
            display: block;
            font-size: 11px;
            margin-top: 2px;
            opacity: 0.8;
        }
        
        .notification-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            width: 380px;
            max-height: 500px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            border: 1px solid #e2e8f0;
            z-index: 1000;
            display: none;
            overflow: hidden;
        }
        
        .notification-dropdown.show {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .notification-dropdown-header {
            padding: 16px 20px;
            border-bottom: 1px solid #e2e8f0;
            background: #f8fafc;
        }
        
        .notification-dropdown-header h4 {
            font-size: 16px;
            font-weight: 700;
            color: #0f172a;
        }
        
        .notification-item {
            padding: 16px 20px;
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .notification-item:hover {
            background-color: #f8fafc;
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-empty {
            padding: 24px 16px;
            text-align: center;
            color: #94a3b8;
            font-size: 14px;
        }

        .notification-empty p {
            margin: 0;
        }

        .notification-layout {
            display: flex;
            justify-content: space-between;
            gap: 12px;
            align-items: flex-start;
        }

        .notification-copy {
            flex: 1;
        }

        .notification-name {
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 4px;
        }

        .notification-device {
            font-size: 13px;
            color: #64748b;
            margin-bottom: 4px;
        }

        .notification-status {
            font-size: 12px;
            font-weight: 600;
            margin: 0;
        }

        .notification-meta {
            text-align: right;
        }

        .notification-meta p {
            font-size: 12px;
            color: #94a3b8;
            margin: 0;
        }
        
        .notification-dropdown-footer {
            padding: 12px 20px;
            border-top: 1px solid #e2e8f0;
            background: #f8fafc;
            text-align: center;
        }
        
        .notification-dropdown-footer a {
            color: #3b82f6;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            transition: color 0.2s ease;
        }
        
        .notification-dropdown-footer a:hover {
            color: #2563eb;
        }
        
        #order-details-modal {
            animation: fadeIn 0.3s ease;
        }
        
        #order-details-modal > div {
            animation: modalSlideUp 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        #order-details-modal > div {
            border-radius: 24px;
            box-shadow: 0 40px 90px -50px rgba(15, 23, 42, 0.8);
            background: transparent;
            width: min(1040px, 100%);
            max-height: 92vh;
            overflow: hidden;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }

        .order-modal-shell {
            display: flex;
            flex-direction: column;
            max-height: 92vh;
            background: #f8fafc;
        }

        .order-modal-header {
            padding: 24px 28px;
            background: linear-gradient(130deg, rgba(15, 23, 42, 0.95), rgba(30, 64, 175, 0.92));
            color: #f8fafc;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
        }

        .order-modal-header h3 {
            color: #f8fafc;
            font-size: 24px;
            font-weight: 700;
        }

        .order-modal-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 6px;
            font-size: 13px;
            color: rgba(226, 232, 240, 0.75);
        }

        .order-modal-meta span {
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .order-modal-body {
            display: grid;
            grid-template-columns: minmax(0, 1fr) 280px;
            gap: 24px;
            padding: 24px 28px 32px;
            overflow-y: auto;
        }

        .order-modal-main {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .order-modal-card {
            background: #ffffff;
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 18px;
            padding: 16px 18px;
            box-shadow: 0 18px 40px -32px rgba(15, 23, 42, 0.4);
        }

        .order-modal-section-title {
            font-size: 11px;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: #64748b;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .order-modal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .order-modal-field {
            display: flex;
            flex-direction: column;
            gap: 6px;
            font-size: 13px;
            color: #0f172a;
        }

        .order-modal-field span.label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.14em;
            color: #64748b;
            font-weight: 600;
        }

        .order-modal-side {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .order-modal-action-stack {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .order-modal-action-stack button {
            width: 100%;
        }

        .order-modal-status-pill {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 999px;
            background: rgba(59, 130, 246, 0.2);
            color: #e0f2fe;
            font-size: 12px;
            font-weight: 600;
        }

        .qc-modal-shell {
            width: min(720px, 100%);
            background: #fff;
            border-radius: 24px;
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 40px 90px -50px rgba(15, 23, 42, 0.8);
            overflow: hidden;
        }

        .qc-modal-header {
            padding: 20px 24px;
            background: linear-gradient(130deg, rgba(15, 23, 42, 0.95), rgba(30, 64, 175, 0.9));
            color: #f8fafc;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .qc-modal-body {
            padding: 24px;
            display: grid;
            gap: 20px;
        }

        .qc-step {
            display: none;
            gap: 16px;
        }

        .qc-step.active {
            display: grid;
        }

        .qc-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
        }

        .qc-option {
            border: 1px solid rgba(148, 163, 184, 0.3);
            border-radius: 14px;
            padding: 12px 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            background: rgba(248, 250, 252, 0.8);
            font-weight: 600;
            color: #0f172a;
        }

        .qc-option input {
            accent-color: #2563eb;
        }

        .qc-modal-footer {
            padding: 16px 24px 22px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            border-top: 1px solid rgba(148, 163, 184, 0.2);
            background: #f8fafc;
        }

        #order-details-modal h3 {
            color: #0f172a;
            font-size: 24px;
            font-weight: 700;
        }

        #order-details-modal .space-y-3 p {
            color: #1e293b;
        }

        #order-details-modal .space-y-3 strong {
            color: #0f172a;
        }

        #modal-action-buttons {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        #modal-action-buttons > * {
            width: 100%;
        }

        .modal-action-group {
            background: rgba(248, 250, 252, 0.92);
            border: 1px solid rgba(148, 163, 184, 0.25);
            border-radius: 16px;
            padding: 14px;
        }

        .modal-action-title {
            font-size: 11px;
            letter-spacing: 0.16em;
            text-transform: uppercase;
            color: #64748b;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .modal-action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .modal-action-grid > * {
            width: 100%;
        }

        #modal-action-buttons button {
            justify-content: center;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-align: center;
            min-height: 44px;
            box-shadow: 0 18px 36px -28px rgba(15, 23, 42, 0.45);
        }

        #modal-loading-message {
            margin-top: 8px;
            font-size: 14px;
            font-weight: 600;
            color: #2563eb;
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
        }

        #modal-loading-message.hidden {
            display: none;
        }

        #modal-message {
            border-radius: 12px;
        }

        #modal-activity-log {
            margin-top: 32px;
            border-top: 1px solid rgba(148, 163, 184, 0.3);
            padding-top: 20px;
        }

        #modal-activity-log.hidden {
            display: none;
        }

        #modal-activity-log h4 {
            font-size: 16px;
            font-weight: 600;
            color: #0f172a;
        }

        #modal-activity-log-list {
            margin-top: 14px;
            display: grid;
            gap: 12px;
        }

        #modal-activity-log-list li {
            list-style: none;
            padding: 12px 16px;
            border-radius: 12px;
            background: rgba(241, 245, 249, 0.85);
            display: flex;
            flex-direction: column;
            gap: 4px;
            font-size: 13px;
            color: #0f172a;
        }

        #modal-activity-log-list li span {
            color: #475569;
        }
        
        .loading-screen {
            position: fixed;
            inset: 0;
            background: #F5F6F8;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .loading-screen.hidden {
            display: none;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #e2e8f0;
            border-top-color: #6366f1;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
    
</head>
<body data-admin-page="orders">

<section class="ship48-banner" data-ship48-banner hidden>
    <div class="ship48-banner__inner">
        <p class="ship48-banner__message" title="Email label orders sent within 48 hours get +$10 with SHIP48 when you send within 48h.">
            <strong>SHIP48</strong> Email label orders sent within 48h earn +$10 with code <span class="ship48-banner__code">SHIP48</span>. Email label only. <span class="ship48-banner__counter" data-ship48-counter></span>
            <span class="ship48-banner__status" data-ship48-status></span>
        </p>
        <div class="ship48-banner__actions">
            <button type="button" class="ship48-banner__apply" data-ship48-apply>Apply SHIP48</button>
            <button type="button" class="ship48-banner__start" data-ship48-start>Start my quote now</button>
        </div>
    </div>
    <button type="button" class="ship48-banner__dismiss" aria-label="Dismiss Ship48 promo" data-ship48-dismiss>&times;</button>
</section>

    <div id="auth-loading-screen" class="loading-screen">
        <div style="text-align: center;">
            <div class="loading-spinner" style="margin: 0 auto;"></div>
            <p style="margin-top: 20px; color: #64748b; font-weight: 600;">Checking authentication...</p>
        </div>
    </div>

    <div class="admin-shell">
        <aside class="admin-sidebar">
            <div class="sidebar-brand">
                <div class="sidebar-logo">BB</div>
                <div class="sidebar-brand-title">
                    <strong>BuyBacking</strong>
                    <span>Admin console</span>
                </div>
            </div>
            <div>
                <div class="sidebar-section-title">Workspace</div>
                <nav class="sidebar-nav">
                    <a class="sidebar-link active" href="/admin/index.html"><i class="fas fa-clipboard-list"></i> Orders</a>
                    <a class="sidebar-link" href="/admin/analytics/"><i class="fas fa-chart-line"></i> Analytics</a>
                    <a class="sidebar-link" href="/admin/print-queue/"><i class="fas fa-print"></i> Print Queue</a>
                    <a class="sidebar-link" href="/admin/pricing.html"><i class="fas fa-tags"></i> Pricing</a>
                    <a class="sidebar-link" href="/admin/print-label.html"><i class="fas fa-truck"></i> Labels</a>
                    <a class="sidebar-link" href="/admin/chat/"><i class="fas fa-message"></i> Chat</a>
                </nav>
            </div>
            <div class="sidebar-card">
                <strong>Quick actions</strong>
                <span>Keep tabs on live orders and streamline daily follow-ups.</span>
                <button type="button" class="logout-btn">Sign out</button>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-nav">
                <div>
                    <h1>Order Management</h1>
                    <p>Monitor every buyback order, update statuses quickly, and keep fulfillment flowing smoothly.</p>
                    <div class="admin-subnav">
                        <a class="admin-subnav__link admin-subnav__link--active" href="/admin/index.html">Orders</a>
                        <a class="admin-subnav__link" href="/admin/analytics/">Analytics</a>
                        <a class="admin-subnav__link" href="/admin/print-queue/">Print Queue</a>
                        <a class="admin-subnav__link" href="/admin/aging/">Aging Watchlist</a>
                    </div>
                </div>
                <div class="top-nav-actions">
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input id="search-orders" type="search" placeholder="Search by order ID, customer, or device">
                    </div>
                    <div class="quick-stat">
                        <span>Live orders</span>
                        <strong id="live-orders-count">0</strong>
                    </div>
                    <div class="quick-stat">
                        <span>Avg payout</span>
                        <strong>$<span id="average-payout-amount">0</span></strong>
                    </div>
                </div>
            </header>

            <div class="mobile-quick-actions">
                <div class="mobile-search">
                    <i class="fas fa-search"></i>
                    <input id="mobile-search-orders" type="search" placeholder="Search orders">
                </div>
                <div class="mobile-stat-row">
                    <div class="mobile-stat">
                        <span>Live orders</span>
                        <strong id="mobile-live-orders-count">0</strong>
                    </div>
                    <div class="mobile-stat">
                        <span>Avg payout</span>
                        <strong>$<span id="mobile-average-payout-amount">0</span></strong>
                    </div>
                </div>
            </div>
        <section class="filters-panel admin-layout-section">
            <div class="filter-bar" id="status-filter-bar">
                <button class="filter-chip active" data-status-filter="all" style="--dot-color: #38bdf8; --dot-shadow: rgba(56, 189, 248, 0.22)">
                    <span class="dot"></span>
                    All orders
                </button>
                <button class="filter-chip" data-status-filter="order_pending" style="--dot-color: #22c55e; --dot-shadow: rgba(34, 197, 94, 0.22)">
                    <span class="dot"></span>
                    New quotes
                </button>
                <button class="filter-chip" data-status-filter="kit_needs_printing" style="--dot-color: #a855f7; --dot-shadow: rgba(168, 85, 247, 0.22)">
                    <span class="dot"></span>
                    Needs printing
                </button>
                <button class="filter-chip" data-status-filter="kit_sent" style="--dot-color: #f97316; --dot-shadow: rgba(249, 115, 22, 0.22)">
                    <span class="dot"></span>
                    Kits in transit
                </button>
                <button class="filter-chip" data-status-filter="kit_delivered" style="--dot-color: #10b981; --dot-shadow: rgba(16, 185, 129, 0.22)">
                    <span class="dot"></span>
                    Kits delivered
                </button>
                <button class="filter-chip" data-status-filter="label_generated" style="--dot-color: #f59e0b; --dot-shadow: rgba(245, 158, 11, 0.22)">
                    <span class="dot"></span>
                    Label generated
                </button>
                <button class="filter-chip" data-status-filter="phone_on_the_way" style="--dot-color: #0ea5e9; --dot-shadow: rgba(14, 165, 233, 0.22)">
                    <span class="dot"></span>
                    Phone on the way
                </button>
                <button class="filter-chip" data-status-filter="received" style="--dot-color: #0ea5e9; --dot-shadow: rgba(14, 165, 233, 0.22)">
                    <span class="dot"></span>
                    Received & processing
                </button>
                <button class="filter-chip" data-status-filter="completed" style="--dot-color: #6366f1; --dot-shadow: rgba(99, 102, 241, 0.22)">
                    <span class="dot"></span>
                    Paid out
                </button>
                <button class="filter-chip" data-status-filter="re-offered-pending" style="--dot-color: #facc15; --dot-shadow: rgba(250, 204, 21, 0.22)">
                    <span class="dot"></span>
                    Reoffer pending
                </button>
                <button class="filter-chip" data-status-filter="return-label-generated" style="--dot-color: #ef4444; --dot-shadow: rgba(239, 68, 68, 0.22)">
                    <span class="dot"></span>
                    Return label sent
                </button>
                <button class="filter-chip" data-status-filter="cancelled" style="--dot-color: #94a3b8; --dot-shadow: rgba(148, 163, 184, 0.22)">
                    <span class="dot"></span>
                    Canceled
                </button>
            </div>

            <div class="promo-filter-panel" id="promo-filter-panel">
                <div style="display:flex;flex-direction:column;gap:4px;min-width:160px;">
                    <label for="promo-code-filter">Promo filter</label>
                    <small>Highlight Ship48 users or find any promo redemptions.</small>
                </div>
                <select id="promo-code-filter" aria-label="Filter orders by promo code">
                    <option value="all">All orders</option>
                    <option value="with">Promo used</option>
                    <option value="none">No promo</option>
                </select>
            </div>
        </section>

        <div class="orders-table-container">
            <div class="orders-table-header">Orders List</div>
                <div class="orders-toolbar">
                    <div class="view-controls">
                        <label class="density-toggle" for="compact-density-toggle">
                            <input type="checkbox" id="compact-density-toggle">
                            Compact rows
                        </label>
                        <span class="orders-toolbar-note" id="last-refresh-at">Updated just now</span>
                    </div>
                    <div class="orders-toolbar-actions">
                            <div class="tracking-refresh-controls">
                                <button type="button" id="refresh-all-kit-tracking" class="tracking-refresh-button tracking-refresh-kit">
                                    <i class="fas fa-sync-alt"></i>
                                    <span>Refresh All Kit Tracking</span>
                                </button>
                            <button type="button" id="separate-kit-orders" class="tracking-refresh-button tracking-refresh-kit">
                                <i class="fas fa-people-arrows"></i>
                                <span>Separate Kit Orders</span>
                            </button>
                            <button type="button" id="refresh-all-email-tracking" class="tracking-refresh-button tracking-refresh-email">
                                <i class="fas fa-sync-alt"></i>
                                <span>Refresh All Email Label Tracking</span>
                            </button>
                                <button type="button" id="bulk-generate-labels" class="tracking-refresh-button tracking-refresh-kit">
                                    <i class="fas fa-tags"></i>
                                    <span>Generate Labels For Selected</span>
                                </button>
                                <button type="button" id="open-order-text-import" class="tracking-refresh-button tracking-refresh-kit">
                                    <i class="fas fa-file-import"></i>
                                    <span>Paste Order From Text</span>
                                </button>
                            </div>
                        <div class="bulk-status-controls">
                            <select id="bulk-status-select" class="bulk-status-select">
                                <option value="">Bulk update status</option>
                            </select>
                            <button type="button" id="bulk-status-apply" class="bulk-status-apply" disabled>
                                <i class="fas fa-check"></i>
                                Update
                            </button>
                            <span class="bulk-status-note">Customer will not be emailed.</span>
                            <span class="bulk-selection-count" id="bulk-selection-count">No orders selected</span>
                        </div>
                    </div>
            </div>
            <div class="orders-table-wrapper">
                <table class="orders-table">
                    <thead>
                        <tr>
                            <th class="select-column">
                                <input type="checkbox" id="select-all-orders" class="order-select-checkbox" aria-label="Select all orders on this page">
                            </th>
                            <th>Order ID</th>
                            <th>Order Date</th>
                            <th>Last Updated</th>
                            <th>Customer</th>
                            <th>Item</th>
                            <th>Status</th>
                            <th>Tracking #</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="orders-table-body">
                        <tr><td colspan="9" class="py-8 text-center text-slate-500">Loading orders...</td></tr>
                    </tbody>
                </table>
            </div>
            <div id="no-orders-message" class="hidden">No orders found for this status.</div>
            <div id="pagination-controls" class="pagination-controls hidden">
                <span class="pagination-info" id="pagination-info">Page 1 of 1</span>
                <div class="pagination-actions">
                    <button id="pagination-first" class="pagination-button" disabled>
                        <i class="fas fa-angles-left"></i>
                        First
                    </button>
                    <button id="pagination-prev" class="pagination-button" disabled>
                        <i class="fas fa-arrow-left"></i>
                        Previous
                    </button>
                    <div id="pagination-pages" class="pagination-pages"></div>
                    <button id="pagination-next" class="pagination-button">
                        Next
                        <i class="fas fa-arrow-right"></i>
                    </button>
                    <button id="pagination-last" class="pagination-button">
                        Last
                        <i class="fas fa-angles-right"></i>
                    </button>
                </div>
            </div>
        </div>

        </main>
    </div>

    <div id="order-text-import-modal" class="fixed inset-0 bg-slate-900/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 hidden">
        <div class="relative w-full max-w-2xl rounded-2xl bg-white shadow-2xl">
            <button id="close-order-text-import" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600 text-xl" aria-label="Close">
                <i class="fas fa-times"></i>
            </button>
            <div class="p-6 space-y-4 text-slate-800">
                <div class="space-y-1">
                    <h3 class="text-2xl font-bold text-slate-900">Paste Order Details</h3>
                    <p class="text-sm text-slate-600">Paste the structured order text below, choose the order ID, and we'll create or update that order.</p>
                </div>
                <div class="grid gap-4 md:grid-cols-2">
                    <label class="block text-sm font-semibold text-slate-700">
                        Order ID
                        <input id="order-text-import-id" type="text" class="mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm shadow-sm focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200" placeholder="SHC-12345">
                        <span class="mt-1 block text-xs text-slate-500">If the ID exists we'll update it; otherwise we'll create it.</span>
                    </label>
                    <label class="block text-sm font-semibold text-slate-700">
                        Shipping Preference
                        <select id="order-text-import-shipping" class="mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm shadow-sm focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200">
                            <option value="Shipping Kit Requested">Shipping Kit Requested</option>
                            <option value="Email Label Requested">Email Label Requested</option>
                        </select>
                    </label>
                </div>
                <label class="block text-sm font-semibold text-slate-700">
                    Pasted Order Text
                    <textarea id="order-text-import" rows="10" class="mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm shadow-sm focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200" placeholder="Customer: Shonter Hill

Email: dev.null.gamble@gmail.com

Phone: 7166660456

Item: S23+

Storage: 256GB

Carrier: unlocked

Estimated Payout: $243.00

Payment Method: cashapp

Payment Info: $shonterhill

Shipping Address:
8111 274th st nw
Stanwood, WA
9829w

Conditions:

Powers On: Yes

Fully Functional: Yes

No Cracks: Yes

Cosmetic: flawless"></textarea>
                </label>
                <div id="order-text-import-feedback" class="hidden rounded-lg border px-3 py-2 text-sm"></div>
                <div class="flex items-center justify-end gap-3">
                    <button id="cancel-order-text-import" type="button" class="inline-flex items-center justify-center rounded-lg border border-slate-300 px-4 py-2 font-semibold text-slate-700 transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-200">Cancel</button>
                    <button id="submit-order-text-import" type="button" class="inline-flex items-center justify-center rounded-lg bg-emerald-600 px-4 py-2 font-semibold text-white shadow-sm transition hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-300">Save Order</button>
                </div>
            </div>
        </div>
    </div>

    <div id="order-details-modal" class="fixed inset-0 bg-slate-900/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 hidden">
        <div class="order-modal-shell">
            <header class="order-modal-header">
                <div>
                    <h3>Order Details <span id="modal-order-id" class="text-sky-200"></span></h3>
                    <div class="order-modal-meta">
                        <span><i class="fas fa-user"></i> <span id="modal-customer-name"></span></span>
                        <span><i class="fas fa-envelope"></i> <span id="modal-customer-email"></span></span>
                        <span><i class="fas fa-phone"></i> <span id="modal-customer-phone"></span></span>
                    </div>
                </div>
                <button id="close-modal" class="text-slate-200 hover:text-white text-2xl" aria-label="Close order details">
                    <i class="fas fa-times"></i>
                </button>
            </header>
            <div class="order-modal-body">
                <div class="order-modal-main order-modal-content space-y-4 text-slate-700">
                    <div class="order-modal-card">
                        <div class="order-modal-section-title">Device Snapshot</div>
                        <div id="modal-items-section" class="rounded-xl border border-slate-200 bg-white/70 p-4 text-sm shadow-sm">
                            <div class="flex items-center justify-between">
                                <strong class="text-slate-700">Devices in this order</strong>
                                <span id="modal-items-count" class="text-xs font-semibold text-slate-500"></span>
                            </div>
                            <div id="modal-items-list" class="mt-3 space-y-2"></div>
                        </div>
                        <div class="order-modal-grid mt-4">
                            <div class="order-modal-field"><span class="label">Item</span><span id="modal-item"></span></div>
                            <div class="order-modal-field"><span class="label">Storage</span><span id="modal-storage"></span></div>
                            <div class="order-modal-field"><span class="label">Carrier</span><span id="modal-carrier"></span></div>
                            <div class="order-modal-field"><span class="label">Estimated Payout</span>$<span id="modal-price"></span></div>
                            <div class="order-modal-field"><span class="label">Payment Method</span><span id="modal-payment-method"></span></div>
                            <div class="order-modal-field"><span class="label">Order Age</span><span id="modal-order-age">Calculating</span></div>
                            <div class="order-modal-field"><span class="label">Last Reminder</span><span id="modal-last-reminder-date">N/A</span></div>
                        </div>
                        <div class="mt-3 grid gap-2 text-sm">
                            <p id="modal-cashapp-tag-row" class="hidden"><strong>Cash App $Cashtag:</strong> <span id="modal-cashapp-tag"></span></p>
                            <p id="modal-echeck-details-row" class="hidden"><strong>eCheck Details:</strong> <span id="modal-echeck-details"></span></p>
                            <p id="modal-paypal-email-row" class="hidden"><strong>PayPal Email:</strong> <span id="modal-paypal-email"></span></p>
                            <p id="modal-zelle-details-row" class="hidden"><strong>Zelle Info:</strong> <span id="modal-zelle-details"></span></p>
                        </div>
                    </div>

                    <div class="order-modal-card">
                        <div class="order-modal-section-title">Shipping Details</div>
                        <div class="space-y-2">
                            <div id="shipping-address-display-row" class="text-sm text-slate-700">
                                <strong>Shipping Address:</strong>
                                <div class="mt-2 flex items-start gap-2">
                                    <span id="modal-shipping-address" class="flex-1 rounded-lg bg-slate-50 px-3 py-2 text-sm font-medium text-slate-900"></span>
                                    <button id="shipping-address-edit-btn" type="button" class="inline-flex items-center justify-center rounded-lg bg-sky-600 px-3 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-400">Edit</button>
                                </div>
                            </div>
                            <div id="shipping-address-add-row" class="hidden text-sm text-slate-700">
                                <strong>Shipping Address:</strong>
                                <div class="mt-2">
                                    <span class="text-sm text-slate-500">No address on file</span>
                                    <button id="shipping-address-add-btn" type="button" class="ml-3 inline-flex items-center justify-center rounded-lg bg-green-600 px-3 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400">Add Address</button>
                                </div>
                            </div>
                            <div id="shipping-address-edit-container" class="hidden rounded-xl border border-slate-200 bg-white/70 p-4 text-sm shadow-sm">
                                <label class="text-xs font-semibold uppercase tracking-wide text-slate-500" for="shipping-address-text">Enter New Shipping Address</label>
                                <input id="shipping-address-text" type="text" class="mt-1 w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200" placeholder="123 Main St, Brooklyn, NY 11230" />
                                <p class="mt-1 text-xs text-slate-500">Enter it on one line like &ldquo;123 Main St, Brooklyn, NY 11230&rdquo;.</p>
                                <div class="mt-3 flex flex-wrap gap-2">
                                    <button id="shipping-address-save-btn" type="button" class="inline-flex items-center justify-center rounded-lg bg-sky-600 px-4 py-2 font-semibold text-white shadow-sm transition hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-1">Save</button>
                                    <button id="shipping-address-cancel" type="button" class="inline-flex items-center justify-center rounded-lg border border-slate-300 px-4 py-2 font-semibold text-slate-700 transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-200">Cancel</button>
                                </div>
                                <p id="shipping-address-edit-feedback" class="mt-2 hidden text-sm"></p>
                            </div>
                            <div id="shipping-address-add-row" class="hidden text-sm text-slate-700">
                                <strong>Shipping Address:</strong>
                                <div class="mt-2">
                                    <span class="text-sm text-slate-500">No address on file</span>
                                    <button id="shipping-address-add-btn" type="button" class="ml-3 inline-flex items-center justify-center rounded-lg bg-green-600 px-3 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400">Add Address</button>
                                </div>
                            </div>
                            <div id="shipping-address-edit-container" class="hidden rounded-xl border border-slate-200 bg-white/70 p-4 text-sm shadow-sm">
                                <label class="text-xs font-semibold uppercase tracking-wide text-slate-500" for="shipping-address-text">Enter New Shipping Address</label>
                                <input id="shipping-address-text" type="text" class="mt-1 w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200" placeholder="123 Main St, Brooklyn, NY 11230" />
                                <p class="mt-1 text-xs text-slate-500">Enter it on one line like &ldquo;123 Main St, Brooklyn, NY 11230&rdquo;.</p>
                                <div class="mt-3 flex flex-wrap gap-2">
                                    <button id="shipping-address-save-btn" type="button" class="inline-flex items-center justify-center rounded-lg bg-sky-600 px-4 py-2 font-semibold text-white shadow-sm transition hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-1">Save</button>
                                    <button id="shipping-address-cancel" type="button" class="inline-flex items-center justify-center rounded-lg border border-slate-300 px-4 py-2 font-semibold text-slate-700 transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-200">Cancel</button>
                                </div>
                                <p id="shipping-address-edit-feedback" class="mt-2 hidden text-sm"></p>
                            </div>
                        </div>
                    </div>

                    <div class="order-modal-card">
                        <div class="order-modal-section-title">Inspection & Status</div>
                        <div class="order-modal-grid">
                            <div class="order-modal-field"><span class="label">Powers On</span><span id="modal-condition-power-on"></span></div>
                            <div class="order-modal-field"><span class="label">Fully Functional</span><span id="modal-condition-functional"></span></div>
                            <div class="order-modal-field"><span class="label">No Cracks</span><span id="modal-condition-cracks"></span></div>
                            <div class="order-modal-field"><span class="label">Cosmetic</span><span id="modal-condition-cosmetic"></span></div>
                        </div>
                    </div>

                    <div class="order-modal-card">
                        <div class="order-modal-section-title">Inspection & Status</div>
                        <div class="order-modal-grid">
                            <div class="order-modal-field"><span class="label">Powers On</span><span id="modal-condition-power-on"></span></div>
                            <div class="order-modal-field"><span class="label">Fully Functional</span><span id="modal-condition-functional"></span></div>
                            <div class="order-modal-field"><span class="label">No Cracks</span><span id="modal-condition-cracks"></span></div>
                            <div class="order-modal-field"><span class="label">Cosmetic</span><span id="modal-condition-cosmetic"></span></div>
                        </div>
                        <div class="mt-4 flex items-center gap-3">
                            <strong>Current Status:</strong>
                            <div id="modal-status-wrapper" class="relative">
                                <button id="modal-status" type="button" class="inline-flex items-center gap-2 font-semibold text-xs px-3 py-1 rounded-full border border-transparent shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400">
                                    <span id="modal-status-text"></span>
                                    <svg id="modal-status-caret" class="h-3 w-3 text-current transition-transform" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                </button>
                                <div id="modal-status-dropdown" class="hidden absolute z-30 mt-2 w-64 rounded-lg border border-slate-200 bg-white shadow-xl py-2"></div>
                            </div>
                        </div>
                    </div>

                    <div id="modal-imei-section" class="hidden order-modal-card">
                        <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                            <h4 class="text-lg font-semibold text-slate-900">IMEI Check</h4>
                            <div class="text-xs font-medium uppercase tracking-[0.2em] text-slate-500">
                                <span>Status:</span>
                                <span id="modal-imei-status" class="ml-2 text-slate-700"></span>
                            </div>
                        </div>
                        <p id="modal-imei-message" class="mt-2 text-sm text-slate-600">Loading device record</p>
                        <div id="modal-imei-form" class="mt-3 hidden flex-col gap-3 sm:flex-row sm:items-center">
                            <label class="text-sm font-medium text-slate-700" for="modal-imei-input">Enter IMEI to test</label>
                            <input id="modal-imei-input" type="text" maxlength="15" inputmode="numeric" autocomplete="off" placeholder="15-digit IMEI" class="w-full flex-1 rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm tracking-widest text-slate-900 shadow-sm focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200" />
                            <button id="modal-imei-button" type="button" class="inline-flex items-center justify-center rounded-lg bg-sky-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:bg-slate-400">Check IMEI</button>
                        </div>
                        <p id="modal-imei-error" class="mt-2 hidden text-sm text-rose-600"></p>
                        <div id="modal-imei-result" class="mt-4 hidden rounded-lg border border-slate-200 bg-slate-50 p-4">
                            <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                                <div>
                                    <p class="text-sm font-semibold text-slate-700">Latest provider result</p>
                                    <p class="text-xs text-slate-500">Device ID: <span id="modal-imei-device-id" class="font-mono text-slate-700"></span></p>
                                </div>
                                <p id="modal-imei-checked-at" class="text-xs text-slate-500"></p>
                            </div>
                            <dl id="modal-imei-result-list" class="mt-3 grid gap-2 text-sm text-slate-700"></dl>
                            <details id="modal-imei-raw-details" class="mt-3 hidden">
                                <summary class="cursor-pointer text-sm font-semibold text-slate-600">View raw provider data</summary>
                                <pre id="modal-imei-raw" class="mt-2 max-h-64 overflow-auto rounded-lg bg-white p-3 text-xs leading-relaxed text-slate-700"></pre>
                            </details>
                        </div>
                    </div>

                    <div class="order-modal-card">
                        <div class="order-modal-section-title">Labels & Tracking</div>
                        <div class="space-y-2 text-sm">
                            <p id="modal-label-row" class="hidden"><strong><span id="modal-label-description">Shipping Label</span>:</strong> <a id="modal-label-link" href="#" target="_blank" class="text-sky-600 hover:underline">View Label</a> (<span id="modal-tracking-number"></span>)</p>
                            <p id="modal-secondary-label-row" class="hidden"><strong><span id="modal-secondary-label-description">Secondary Label</span>:</strong> <a id="modal-secondary-label-link" href="#" target="_blank" class="text-sky-600 hover:underline">View Label</a> (<span id="modal-secondary-tracking-number-display"></span>)</p>
                            <p id="modal-return-label-row" class="hidden"><strong><span id="modal-return-label-description">Return Label</span>:</strong> <a id="modal-return-label-link" href="#" target="_blank" class="text-rose-600 hover:underline">View Return Label</a> (<span id="modal-return-tracking-number-display"></span>)</p>
                            <div id="modal-label-status-row" class="hidden bg-slate-100 border border-slate-200 rounded-lg p-3 space-y-2">
                                <div class="flex items-center justify-between gap-3">
                                    <p id="modal-label-status-title" class="text-sm font-semibold text-slate-700">Label Delivery Status</p>
                                    <button id="modal-refresh-label-tracking" type="button" class="hidden inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white px-3 py-1 text-xs font-semibold text-slate-600 shadow-sm transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-slate-400">
                                        <i class="fas fa-rotate"></i>
                                        Refresh
                                    </button>
                                </div>
                                <p id="modal-label-status" class="text-sm text-slate-600"></p>
                            </div>
                            <div id="modal-kit-tracking-row" class="hidden bg-slate-100 border border-slate-200 rounded-lg p-3">
                                <p id="modal-kit-tracking-title" class="text-sm font-semibold text-slate-700">Kit Delivery Status</p>
                                <p id="modal-kit-tracking-status" class="mt-1 text-slate-600"></p>
                                <p id="modal-kit-tracking-updated" class="mt-1 text-xs text-slate-500"></p>
                            </div>
                        </div>
                    </div>

                    <div id="modal-loading-message" class="hidden">
                        <i class="fas fa-spinner fa-spin"></i>
                        Processing request
                    </div>

                <div id="reoffer-form-container" class="mt-6 p-4 border border-slate-200 rounded-lg hidden">
                    <h4 class="text-lg font-semibold text-slate-900 mb-4">Propose New Offer</h4>
                    <div class="space-y-4">
                        <div>
                            <label for="reoffer-new-price" class="block text-sm font-medium text-slate-700">New Offer Price ($)</label>
                            <input type="number" id="reoffer-new-price" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2" placeholder="e.g., 150.00">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700">Reasons</label>
                            <div class="mt-1 space-y-2">
                                <div class="flex items-center gap-2">
                                    <input id="reason-damaged" name="reoffer-reasons" type="checkbox" value="damaged" class="h-4 w-4 text-sky-600 border-slate-300 rounded focus:ring-sky-500">
                                    <label for="reason-damaged" class="text-sm text-slate-700">Damaged (includes cracks)</label>
                                </div>
                                <div class="flex items-center gap-2">
                                    <input id="reason-deep-scratches" name="reoffer-reasons" type="checkbox" value="deep-scratches" class="h-4 w-4 text-sky-600 border-slate-300 rounded focus:ring-sky-500">
                                    <label for="reason-deep-scratches" class="text-sm text-slate-700">Deep Scratches</label>
                                </div>
                                <div class="flex items-center gap-2">
                                    <input id="reason-wrong-device" name="reoffer-reasons" type="checkbox" value="wrong-device" class="h-4 w-4 text-sky-600 border-slate-300 rounded focus:ring-sky-500">
                                    <label for="reason-wrong-device" class="text-sm text-slate-700">Wrong Device Sent</label>
                                </div>
                                <div class="flex items-center gap-2">
                                    <input id="reason-non-functional" name="reoffer-reasons" type="checkbox" value="non-functional" class="h-4 w-4 text-sky-600 border-slate-300 rounded focus:ring-sky-500">
                                    <label for="reason-non-functional" class="text-sm text-slate-700">Non-Functional Component</label>
                                </div>
                                <div class="flex items-center gap-2">
                                    <input id="reason-other" name="reoffer-reasons" type="checkbox" value="other" class="h-4 w-4 text-sky-600 border-slate-300 rounded focus:ring-sky-500">
                                    <label for="reason-other" class="text-sm text-slate-700">Other</label>
                                </div>
                            </div>
                        </div>
                        <div id="reoffer-pricing-helper" class="mt-4 p-3 bg-slate-50 border border-slate-200 rounded-lg hidden">
                            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1">
                                <p class="text-sm font-semibold text-slate-700">Feed Pricing Suggestions</p>
                                <span id="reoffer-pricing-model" class="text-xs uppercase tracking-wide text-slate-500"></span>
                            </div>
                            <p class="text-xs text-slate-500 mt-1">Click a value below to populate the new offer amount.</p>
                            <div id="reoffer-pricing-values" class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3"></div>
                            <p id="reoffer-pricing-message" class="mt-2 text-xs text-rose-500 hidden"></p>
                        </div>
                        <div>
                            <label for="reoffer-comments" class="block text-sm font-medium text-slate-700">Additional Comments</label>
                            <textarea id="reoffer-comments" rows="3" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2" placeholder="Enter additional details here..."></textarea>
                        </div>
                    </div>
                    <div class="mt-4 flex justify-end gap-3">
                        <button id="cancel-reoffer-btn" type="button" class="bg-slate-400 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-md transition-colors">Cancel</button>
                        <button id="submit-reoffer-btn" type="button" class="bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2 px-4 rounded-md transition-colors">Send Re-offer</button>
                    </div>
                    <span id="orders-trend-delta" class="trend-delta trend-neutral">0%</span>
                </div>

                <div id="manual-fulfillment-form-container" class="mt-6 p-4 border border-slate-200 rounded-lg hidden">
                    <h4 class="text-lg font-semibold text-slate-900 mb-4">Manually Fulfill Order (External Label)</h4>
                    <p id="manual-fulfillment-message" class="text-sm text-slate-600 mb-4">Enter the tracking number(s) generated externally. This will update the order status and notify the customer.</p>
                    <div class="space-y-4">
                        <div id="manual-outbound-tracking-group">
                            <label for="manual-outbound-tracking" class="block text-sm font-medium text-slate-700">Outbound Kit Tracking # (Required for Kits)</label>
                            <input type="text" id="manual-outbound-tracking" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2" placeholder="e.g., 9400 1000 0000 0000 0000 00">
                        </div>
                        <div id="manual-inbound-tracking-group">
                            <label for="manual-inbound-tracking" class="block text-sm font-medium text-slate-700">Inbound Device Tracking # (Required)</label>
                            <input type="text" id="manual-inbound-tracking" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2" placeholder="e.g., 9400 1000 0000 0000 0000 01">
                        </div>
                        <div>
                            <label for="manual-label-url" class="block text-sm font-medium text-slate-700">Inbound Label URL (Optional - direct PDF link)</label>
                            <input type="url" id="manual-label-url" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2" placeholder="https://example.com/label.pdf">
                        </div>
                    </div>
                    <div class="mt-4 flex justify-end gap-3">
                        <button id="cancel-manual-fulfillment-btn" type="button" class="bg-slate-400 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-md transition-colors">Cancel</button>
                        <button id="submit-manual-fulfillment-btn" type="button" class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-4 rounded-md transition-colors">Confirm Fulfillment</button>
                    </div>
                </div>

                <div id="cancel-order-form-container" class="mt-6 p-4 border border-rose-200 bg-rose-50 rounded-lg hidden">
                    <h4 class="text-lg font-semibold text-rose-600 mb-2">Cancel Order &amp; Void Labels</h4>
                    <p id="cancel-order-message" class="text-sm text-rose-700">Select the shipping labels that should be voided before cancelling this order.</p>
                    <div id="cancel-order-void-options" class="mt-4 space-y-3"></div>
                    <p id="cancel-order-error" class="mt-3 text-sm text-rose-600 hidden"></p>
                    <div class="mt-4 flex justify-end gap-3">
                        <button id="cancel-cancel-order-btn" type="button" class="bg-slate-400 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-md transition-colors">Back</button>
                        <button id="confirm-cancel-order-btn" type="button" class="bg-rose-600 hover:bg-rose-700 text-white font-semibold py-2 px-4 rounded-md transition-colors">Void Labels &amp; Cancel Order</button>
                    </div>
                </div>

                <div id="void-label-form-container" class="mt-6 p-4 border border-rose-200 bg-rose-50 rounded-lg hidden">
                    <h4 class="text-lg font-semibold text-rose-600 mb-2">Void Shipping Labels</h4>
                    <p class="text-sm text-rose-700">Select the labels you would like to cancel. Carrier approval may vary based on label age and usage.</p>
                    <div id="void-label-options" class="mt-4 space-y-3"></div>
                    <p id="void-label-message" class="mt-3 text-sm hidden"></p>
                    <div class="mt-4 flex justify-end gap-3">
                        <button id="cancel-void-label-btn" type="button" class="bg-slate-400 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-md transition-colors">Cancel</button>
                        <button id="submit-void-label-btn" type="button" class="bg-rose-600 hover:bg-rose-700 text-white font-semibold py-2 px-4 rounded-md transition-colors">Void Selected Labels</button>
                    </div>
                </div>

                <div id="clear-data-form-container" class="mt-6 p-4 border border-amber-200 bg-amber-50 rounded-lg hidden">
                    <h4 class="text-lg font-semibold text-amber-700 mb-2">Clear Saved Shipping Data</h4>
                    <p class="text-sm text-amber-700">Remove outdated tracking numbers or label records so you can regenerate the correct documents without visiting Firestore.</p>
                    <p id="clear-data-message" class="mt-3 text-sm hidden"></p>
                    <div id="clear-data-options" class="mt-4 space-y-3"></div>
                    <div class="mt-4 flex justify-end gap-3">
                        <button id="cancel-clear-data-btn" type="button" class="bg-slate-400 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-md transition-colors">Cancel</button>
                        <button id="submit-clear-data-btn" type="button" class="bg-amber-600 hover:bg-amber-700 text-white font-semibold py-2 px-4 rounded-md transition-colors">Clear Selected Data</button>
                    </div>
                </div>

                <div id="delete-confirmation-container" class="mt-6 p-4 bg-rose-100 border border-rose-300 rounded-lg hidden">
                    <p class="text-sm font-semibold text-rose-700 mb-3"> Are you sure you want to permanently delete this order? This action cannot be undone.</p>
                    <div class="flex justify-end gap-3">
                        <button id="cancel-delete-btn" type="button" class="bg-slate-400 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-md transition-colors">Cancel</button>
                        <button id="confirm-delete-btn" type="button" class="bg-rose-600 hover:bg-rose-700 text-white font-semibold py-2 px-4 rounded-md transition-colors">Yes, Delete Permanently</button>
                    </div>
                </div>
                </div>
                <aside class="order-modal-side">
                    <div class="order-modal-card">
                        <div class="order-modal-section-title">Actions</div>
                        <div class="order-modal-action-stack">
                            <button id="send-reminder-btn" class="hidden w-full px-4 py-3 bg-amber-500 text-white font-semibold rounded-lg hover:bg-amber-600 transition-colors flex items-center justify-center gap-2">
                                <i class="fas fa-envelope"></i>
                                <span>Send Reminder Email</span>
                            </button>
                            <button id="send-expiring-reminder-btn" class="hidden w-full px-4 py-3 bg-rose-500 text-white font-semibold rounded-lg hover:bg-rose-600 transition-colors flex items-center justify-center gap-2">
                                <i class="fas fa-hourglass-half"></i>
                                <span>Send Expiration Reminder</span>
                            </button>
                            <button id="send-kit-reminder-btn" class="hidden w-full px-4 py-3 bg-emerald-500 text-white font-semibold rounded-lg hover:bg-emerald-600 transition-colors flex items-center justify-center gap-2">
                                <i class="fas fa-truck"></i>
                                <span>Send Kit Follow-up</span>
                            </button>
                        </div>
                        <div id="modal-action-buttons" class="mt-4"></div>
                        <div id="modal-message" class="mt-4 p-3 text-sm rounded-md hidden"></div>
                    </div>
                    <div id="modal-activity-log" class="hidden order-modal-card">
                        <h4 class="text-base font-semibold text-slate-800">Recent Activity</h4>
                        <ul id="modal-activity-log-list"></ul>
                    </div>
                </aside>
            </div>
        </div>
    </div>

    <div id="qc-modal" class="fixed inset-0 bg-slate-900/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 hidden">
        <div class="qc-modal-shell">
            <div class="qc-modal-header">
                <div>
                    <h3 class="text-lg font-semibold">QC Intake Checklist</h3>
                    <p class="text-sm text-slate-200" id="qc-modal-order-id"></p>
                </div>
                <button id="qc-modal-close" class="text-slate-200 hover:text-white text-xl" aria-label="Close QC modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="qc-modal-body">
                <div class="text-sm font-semibold text-slate-700" id="qc-step-title">Step 1 of 8</div>
                <div class="qc-step active" data-qc-step="0">
                    <h4 class="text-lg font-semibold text-slate-900">Overall condition</h4>
                    <div class="qc-options">
                        <label class="qc-option"><input type="radio" name="qc-overall" value="flawless"> Flawless</label>
                        <label class="qc-option"><input type="radio" name="qc-overall" value="good"> Good</label>
                        <label class="qc-option"><input type="radio" name="qc-overall" value="fair"> Fair</label>
                        <label class="qc-option"><input type="radio" name="qc-overall" value="damaged"> Damaged</label>
                    </div>
                </div>
                <div class="qc-step" data-qc-step="1">
                    <h4 class="text-lg font-semibold text-slate-900">Cracked screen?</h4>
                    <div class="qc-options">
                        <label class="qc-option"><input type="radio" name="qc-cracked" value="yes"> Yes</label>
                        <label class="qc-option"><input type="radio" name="qc-cracked" value="no"> No</label>
                    </div>
                </div>
                <div class="qc-step" data-qc-step="2">
                    <h4 class="text-lg font-semibold text-slate-900">Screen defects (dead pixels, burn-in, lines)?</h4>
                    <div class="qc-options">
                        <label class="qc-option"><input type="radio" name="qc-defects" value="yes"> Yes</label>
                        <label class="qc-option"><input type="radio" name="qc-defects" value="no"> No</label>
                    </div>
                </div>
                <div class="qc-step" data-qc-step="3">
                    <h4 class="text-lg font-semibold text-slate-900">Is the device locked?</h4>
                    <div class="qc-options">
                        <label class="qc-option"><input type="radio" name="qc-locked" value="yes"> Yes</label>
                        <label class="qc-option"><input type="radio" name="qc-locked" value="no"> No</label>
                    </div>
                    <div id="qc-locked-carrier-wrapper" class="hidden mt-4">
                        <label class="block text-sm font-semibold text-slate-700">Locked carrier</label>
                        <select id="qc-locked-carrier" class="mt-2 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm shadow-sm">
                            <option value="">Select carrier</option>
                            <option value="att">AT&amp;T</option>
                            <option value="verizon">Verizon</option>
                            <option value="tmobile">T-Mobile</option>
                            <option value="sprint">Sprint</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="qc-step" data-qc-step="4">
                    <h4 class="text-lg font-semibold text-slate-900">Outstanding balance?</h4>
                    <div class="qc-options">
                        <label class="qc-option"><input type="radio" name="qc-balance" value="yes"> Yes</label>
                        <label class="qc-option"><input type="radio" name="qc-balance" value="no"> No</label>
                    </div>
                </div>
                <div class="qc-step" data-qc-step="5">
                    <h4 class="text-lg font-semibold text-slate-900">Fully functional?</h4>
                    <div class="qc-options">
                        <label class="qc-option"><input type="radio" name="qc-functional" value="yes"> Yes</label>
                        <label class="qc-option"><input type="radio" name="qc-functional" value="no"> No</label>
                    </div>
                </div>
                <div class="qc-step" data-qc-step="6">
                    <h4 class="text-lg font-semibold text-slate-900">FMI / Activation lock?</h4>
                    <div class="qc-options">
                        <label class="qc-option"><input type="radio" name="qc-fmi" value="yes"> Yes</label>
                        <label class="qc-option"><input type="radio" name="qc-fmi" value="no"> No</label>
                    </div>
                </div>
                <div class="qc-step" data-qc-step="7">
                    <h4 class="text-lg font-semibold text-slate-900">Send condition emails</h4>
                    <p class="text-sm text-slate-600">Optionally notify the customer about issues found.</p>
                    <div class="mt-4 grid gap-3 text-sm text-slate-700">
                        <label class="flex items-center gap-2"><input type="checkbox" id="qc-email-balance"> Outstanding balance notice</label>
                        <label class="flex items-center gap-2"><input type="checkbox" id="qc-email-fmi"> FMI / Activation lock notice</label>
                        <label class="flex items-center gap-2"><input type="checkbox" id="qc-email-password"> Password lock notice</label>
                        <label class="flex items-center gap-2"><input type="checkbox" id="qc-email-stolen"> Lost/Stolen notice</label>
                    </div>
                </div>
            </div>
            <div class="qc-modal-footer">
                <button id="qc-prev-btn" type="button" class="inline-flex items-center justify-center rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-50">Back</button>
                <div class="flex items-center gap-2">
                    <button id="qc-next-btn" type="button" class="inline-flex items-center justify-center rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-slate-800">Next</button>
                    <button id="qc-submit-btn" type="button" class="hidden inline-flex items-center justify-center rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-emerald-700">Finish QC</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        window.escapeHtml = window.escapeHtml || function (value) {
            if (value === null || value === undefined) {
                return "";
            }
            return String(value)
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#39;");
        };
    </script>
    <script type="module" src="/assets/js/pages/admin-index.js"></script>

  <script type="module" src="/assets/js/global-auth.js" defer></script>
</body>
</html>
