<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/assets/css/tailwind.css">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BuyBackKing • Operations Control Center</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-GdQHk37X1JtQfCFpW9FzMSbrGzG1gY72t8vFZAyd4Vxq70zY0sxM48lc4ATcLQIRHBVd98mS+XH1YQ7qG9Plg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root {
      color-scheme: dark;
      --bg: #040910;
      --bg-alt: #060d1b;
      --panel: rgba(9, 16, 33, 0.85);
      --border: rgba(255, 255, 255, 0.08);
      --accent: #09f3c4;
      --accent-2: #2d7bff;
      --text: #f4f8ff;
      --muted: rgba(244, 248, 255, 0.6);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Manrope", "Inter", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at 5% 10%, rgba(45, 123, 255, 0.25), transparent 45%),
                  radial-gradient(circle at 90% 0%, rgba(9, 243, 196, 0.3), transparent 40%),
                  var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 24px;
      display: flex;
      gap: 24px;
    }

    .control-shell {
      width: 100%;
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 24px;
    }

    @media (max-width: 1040px) {
      body {
        flex-direction: column;
      }
      .control-shell {
        grid-template-columns: 1fr;
      }
    }

    aside {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 28px;
      padding: 28px;
      display: flex;
      flex-direction: column;
      gap: 32px;
      backdrop-filter: blur(16px);
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.45);
    }

    .brand {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .brand span {
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-size: 12px;
      color: var(--muted);
    }

    .brand strong {
      font-family: "Space Mono", monospace;
      font-size: 20px;
    }

    nav ul {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    nav a {
      text-decoration: none;
      color: var(--text);
      padding: 14px 18px;
      display: flex;
      align-items: center;
      gap: 12px;
      border-radius: 16px;
      border: 1px solid transparent;
      transition: all 0.2s ease;
      background: rgba(255, 255, 255, 0.02);
    }

    nav a:hover,
    nav a:focus-visible {
      border-color: rgba(9, 243, 196, 0.4);
      background: rgba(9, 243, 196, 0.1);
      box-shadow: 0 0 15px rgba(9, 243, 196, 0.2);
    }

    main {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 32px;
      padding: 32px;
      display: flex;
      flex-direction: column;
      gap: 32px;
      backdrop-filter: blur(18px);
    }

    header.control-header {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      align-items: center;
      justify-content: space-between;
    }

    .search {
      position: relative;
      flex: 1;
      min-width: 240px;
    }

    .search input {
      width: 100%;
      padding: 14px 48px;
      border-radius: 18px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.04);
      color: var(--text);
      font-size: 15px;
    }

    .search i {
      position: absolute;
      top: 50%;
      left: 18px;
      transform: translateY(-50%);
      color: var(--muted);
    }

    .user-chip {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      border-radius: 20px;
      background: linear-gradient(120deg, rgba(9, 243, 196, 0.15), rgba(45, 123, 255, 0.15));
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .grid {
      display: grid;
      gap: 20px;
    }

    .grid.stats {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }

    .panel {
      border-radius: 24px;
      border: 1px solid var(--border);
      padding: 20px;
      background: rgba(255, 255, 255, 0.02);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
    }

    .stat-value {
      font-size: 32px;
      font-weight: 700;
    }

    .stat-label {
      font-size: 13px;
      color: var(--muted);
    }

    .stat-trend {
      font-size: 12px;
      margin-top: 8px;
    }

    .status-good {
      color: #55ffa9;
    }

    .status-warn {
      color: #ffd966;
    }

    .section-title {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 18px;
      margin-bottom: 16px;
      font-weight: 600;
    }

    .actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
    }

    .action-card {
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      padding: 18px;
      background: rgba(9, 243, 196, 0.03);
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .action-card h3 {
      font-size: 16px;
    }

    .action-card p {
      color: var(--muted);
      font-size: 14px;
      flex: 1;
    }

    .action-card a {
      color: var(--accent);
      text-decoration: none;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .timeline {
      display: flex;
      flex-direction: column;
      gap: 14px;
      position: relative;
      padding-left: 28px;
    }

    .timeline::before {
      content: "";
      position: absolute;
      left: 12px;
      top: 6px;
      bottom: 6px;
      width: 2px;
      background: rgba(255, 255, 255, 0.15);
    }

    .timeline-item {
      position: relative;
    }

    .timeline-item::before {
      content: "";
      position: absolute;
      left: -22px;
      top: 6px;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 12px rgba(9, 243, 196, 0.5);
    }

    .timeline-item h4 {
      font-size: 15px;
    }

    .timeline-item span {
      font-size: 12px;
      color: var(--muted);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    table th,
    table td {
      padding: 12px 8px;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }

    table th {
      font-weight: 600;
      color: var(--muted);
      text-transform: uppercase;
      font-size: 12px;
      letter-spacing: 0.08em;
    }

    .badges {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(45, 123, 255, 0.15);
      color: #8eb5ff;
    }

    .alert-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .alert {
      padding: 12px 16px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.06);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    .alert strong {
      font-size: 14px;
    }

    .alert button {
      background: none;
      border: none;
      color: var(--accent);
      cursor: pointer;
      font-weight: 600;
    }

    .flex-split {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    .automation-list {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .automation-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .automation-item label {
      font-weight: 600;
    }

    .toggle {
      width: 52px;
      height: 28px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.15);
      position: relative;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .toggle::after {
      content: "";
      position: absolute;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: #fff;
      top: 2px;
      left: 2px;
      transition: transform 0.2s ease;
    }

    .toggle[data-active="true"] {
      background: rgba(9, 243, 196, 0.35);
    }

    .toggle[data-active="true"]::after {
      transform: translateX(24px);
    }

    footer {
      text-align: center;
      font-size: 12px;
      color: var(--muted);
    }
  </style>
    
    <link rel="stylesheet" href="/assets/css/site-chrome.css">
</head>
<body>
  <div class="control-shell">
    <aside>
      <div class="brand">
        <span>Administrator</span>
        <strong>Operations Control</strong>
      </div>
      <nav>
        <ul>
          <li><a href="/admin/index.html"><i class="fa-solid fa-layer-group"></i>Legacy Order Board</a></li>
          <li><a href="/admintest/pricing.html"><i class="fa-solid fa-scale-balanced"></i>Device Pricing Modeler</a></li>
          <li><a href="/admintest/print-label.html"><i class="fa-solid fa-barcode"></i>Shipping Label Studio</a></li>
          <li><a href="/admintest/bulk-print.html"><i class="fa-solid fa-file-circle-check"></i>Guided Bulk Print</a></li>
          <li><a href="/admin/print-queue/index.html"><i class="fa-solid fa-print"></i>Print Queue</a></li>
          <li><a href="/admin/analytics/index.html"><i class="fa-solid fa-chart-column"></i>Analytics Lab</a></li>
          <li><a href="/admin/email/index.html"><i class="fa-solid fa-envelope-open-text"></i>Messaging Playbooks</a></li>
          <li><a href="/admintest/chat.html"><i class="fa-solid fa-comments"></i>Live Chat Console</a></li>
          <li><a href="/admin/aging/index.html"><i class="fa-solid fa-hourglass-half"></i>Aging Inventory</a></li>
        </ul>
      </nav>
      <div>
        <p style="font-size:13px;color:var(--muted);">Route map shows every live tool wired to production endpoints. Hover links to see the exact URL.</p>
      </div>
    </aside>

    <main>
      <!-- Site Header -->
<header class="site-header" data-site-header>
    <div class="site-header__inner site-header__inner--centered">
        <div class="logo-container-left">
            <a href="/" class="logo-link" aria-label="SecondHandCell home">
                <img src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/assets/logo.png" alt="SecondHandCell Logo" class="logo-image" onerror="this.onerror=null;this.src='https://placehold.co/200x64/ffffff/1e293b?text=SecondHandCell';">
            </a>
        </div>
        <div class="logo-text-container-center">
            <div class="logo-wordmark">
                <span class="logo-wordmark__primary">Second</span><span class="logo-wordmark__accent">HandCell</span>
            </div>
            <p class="logo-tagline">Turn Your Old <span>Phone Into Cash!</span></p>
        </div>
        <nav class="header-auth-nav" aria-label="Account navigation">
            <div id="authStatusContainer" class="site-header__auth-wrapper">
                <a href="#" id="loginNavBtn" class="site-header__login">Login/Sign Up</a>
                <div id="userMonogram" class="user-monogram hidden"></div>
                <div id="authDropdown" class="auth-dropdown hidden">
                    <a href="/my-account.html" class="auth-dropdown__link">My Account</a>
                    <button id="logoutBtn" type="button" class="auth-dropdown__button btn-red-logout">Logout</button>
                </div>
            </div>
        </nav>
    </div>
</header>
<section class="ship48-banner" data-ship48-banner hidden>
    <div class="ship48-banner__inner">
        <p class="ship48-banner__message" title="Email label orders sent within 48 hours get +$10 with SHIP48 when you send within 48h.">
            <strong>SHIP48</strong> Email label orders sent within 48h earn +$10 with code <span class="ship48-banner__code">SHIP48</span>. Email label only. <span class="ship48-banner__counter" data-ship48-counter></span>
            <span class="ship48-banner__status" data-ship48-status></span>
        </p>
        <div class="ship48-banner__actions">
            <button type="button" class="ship48-banner__apply" data-ship48-apply>Apply SHIP48</button>
            <button type="button" class="ship48-banner__start" data-ship48-start>Start my quote now</button>
        </div>
    </div>
    <button type="button" class="ship48-banner__dismiss" aria-label="Dismiss Ship48 promo" data-ship48-dismiss>&times;</button>
</section>


      <section class="panel">
        <div class="section-title">
          <span>Critical Metrics</span>
          <small style="color:var(--muted);">Live data sync · refreshed every 90 seconds</small>
        </div>
        <div class="grid stats" id="statGrid"></div>
      </section>

      <section class="panel">
        <div class="section-title">
          <span>Operational Shortcuts</span>
          <a href="/admin/index.html" style="color:var(--accent);text-decoration:none;font-size:13px;">Open legacy board</a>
        </div>
        <div class="actions">
          <article class="action-card">
            <h3>Order Routing</h3>
            <p>Assign devices to refurbish, recycle, or resell queues instantly.</p>
            <a href="/admin/index.html" data-route="orders">Launch <i class="fa-solid fa-arrow-up-right-from-square"></i></a>
          </article>
          <article class="action-card">
            <h3>Dynamic Pricing</h3>
            <p>Update device payouts with built-in market benchmarks and guardrails.</p>
            <a href="/admintest/pricing.html" data-route="pricing">Update</a>
          </article>
          <article class="action-card">
            <h3>Guided Bulk Print</h3>
            <p>Open each printable order in sequence so you only press Enter on the dialog.</p>
            <a href="/admintest/bulk-print.html" data-route="bulkPrint">Start queue</a>
          </article>
          <article class="action-card">
            <h3>Label Studio</h3>
            <p>Load one order’s paperwork bundle, sync tracking, and resend confirmations.</p>
            <a href="/admintest/print-label.html" data-route="labelStudio">Create labels</a>
          </article>
          <article class="action-card">
            <h3>Analytics Pulse</h3>
            <p>Drill into acquisition sources, device mix, and ROI.</p>
            <a href="/admin/analytics/index.html" data-route="analytics">View dashboards</a>
          </article>
          <article class="action-card">
            <h3>Customer Messaging</h3>
            <p>Trigger the email/SMS playbook for approvals, missing info, or counter-offers.</p>
            <a href="/admin/email/index.html" data-route="email">Open studio</a>
          </article>
          <article class="action-card">
            <h3>Live Conversations</h3>
            <p>Answer live chat escalations directly from the omni-channel inbox.</p>
            <a href="/admintest/chat.html" data-route="chat">Connect</a>
          </article>
        </div>
      </section>

      <section class="panel">
        <div class="section-title">
          <span>Workflow Monitor</span>
          <small style="color:var(--muted);">Shows the last 6 major events</small>
        </div>
        <div class="timeline" id="timeline"></div>
      </section>

      <section class="panel">
        <div class="section-title">
          <span>Device Intake Snapshot</span>
          <a href="/admin/aging/index.html" style="color:var(--accent-2);text-decoration:none;font-size:13px;">View full intake</a>
        </div>
        <div class="grid" style="gap:28px;">
          <div style="overflow:auto;">
            <table id="deviceTable">
              <thead>
                <tr>
                  <th>Device</th>
                  <th>Condition</th>
                  <th>Offer</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <div class="alert-list" id="alerts"></div>
        </div>
      </section>

      <section class="panel">
        <div class="section-title">
          <span>Automation & Outreach</span>
          <small style="color:var(--muted);">Routes wired to live tooling</small>
        </div>
        <div class="flex-split">
          <div>
            <h4 style="margin-bottom:14px;">Automation toggles</h4>
            <div class="automation-list" id="automationList"></div>
          </div>
          <div>
            <h4 style="margin-bottom:14px;">Launch outreach</h4>
            <p style="color:var(--muted);font-size:14px;">Choose a playbook and we'll take you straight into the messaging app with filters applied.</p>
            <div class="actions" style="grid-template-columns:1fr;">
              <article class="action-card" style="background:rgba(45,123,255,0.08);">
                <h3>Counter Offer Blitz</h3>
                <p>Ping every outstanding counter-offer via SMS + email.</p>
                <a href="/admin/email/index.html?playbook=counter-offer">Open workflow</a>
              </article>
              <article class="action-card" style="background:rgba(9,243,196,0.08);">
                <h3>Shipping Reminder</h3>
                <p>Send reminders to customers with approved offers but no tracking.</p>
                <a href="/admin/email/index.html?playbook=shipping-reminder">Launch reminder</a>
              </article>
            </div>
          </div>
        </div>
      </section>

      <footer>
        &copy; <span id="year"></span> BuyBackKing Ops • Every route above links directly to the live admin micro-app powering that function.
      </footer>
    </main>
  </div>

  <script>
    const stats = [
      { label: "Open orders", value: 128, trend: "+12% today", status: "good" },
      { label: "Devices received", value: 74, trend: "18 awaiting QA", status: "warn" },
      { label: "Avg. payout", value: "$218", trend: "+$9 vs last week", status: "good" },
      { label: "Messages waiting", value: 9, trend: "Respond within 15m", status: "warn" }
    ];

    const routes = {
      orders: "/admin/index.html",
      pricing: "/admintest/pricing.html",
      bulkPrint: "/admintest/bulk-print.html",
      labelStudio: "/admintest/print-label.html",
      analytics: "/admin/analytics/index.html",
      email: "/admin/email/index.html",
      chat: "/admintest/chat.html"
    };

    const timelineEvents = [
      { title: "Batch BBK-447 shipped", time: "2 minutes ago", detail: "Printed via Shipping Label Studio" },
      { title: "12 IMEI verified", time: "15 minutes ago", detail: "Pulled from Device Pricing Modeler" },
      { title: "3 offers countered", time: "26 minutes ago", detail: "Sent with Counter Offer Blitz" },
      { title: "Analytics Lab exported", time: "31 minutes ago", detail: "Paid media cohort" },
      { title: "Chat escalation resolved", time: "42 minutes ago", detail: "Live Chat Console" },
      { title: "Aging report refreshed", time: "55 minutes ago", detail: "Inventory risk down 11%" }
    ];

    const intake = [
      { device: "iPhone 14 Pro", condition: "Excellent", offer: "$760", status: "Awaiting QA" },
      { device: "Galaxy S22 Ultra", condition: "Good", offer: "$520", status: "Label issued" },
      { device: "Pixel 8", condition: "Fair", offer: "$380", status: "Needs approval" },
      { device: "iPad Pro 11\"", condition: "Like New", offer: "$640", status: "In transit" }
    ];

    const alertFeed = [
      { title: "Low photo evidence", action: "Request again" },
      { title: "IMEI mismatch on BBK-8821", action: "Review" },
      { title: "3 shipments overdue", action: "Message" }
    ];

    const automations = [
      { name: "Auto-approve flawless condition", active: true },
      { name: "Instant chat escalation", active: true },
      { name: "Hold payouts without ID", active: false },
      { name: "Sync tracking to analytics", active: true }
    ];

    const statGrid = document.getElementById("statGrid");
    stats.forEach((stat) => {
      const card = document.createElement("article");
      card.className = "panel";
      card.innerHTML = `<div class="stat-value">${stat.value}</div>
        <div class="stat-label">${stat.label}</div>
        <div class="stat-trend ${stat.status === "good" ? "status-good" : "status-warn"}">${stat.trend}</div>`;
      statGrid.appendChild(card);
    });

    document.querySelectorAll('[data-route]').forEach((link) => {
      const key = link.dataset.route;
      if (routes[key]) {
        link.href = routes[key];
        link.title = routes[key];
      }
    });

    const timeline = document.getElementById("timeline");
    timelineEvents.forEach((event) => {
      const item = document.createElement("div");
      item.className = "timeline-item";
      item.innerHTML = `<h4>${event.title}</h4><span>${event.time} · ${event.detail}</span>`;
      timeline.appendChild(item);
    });

    const tbody = document.querySelector("#deviceTable tbody");
    intake.forEach((row) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${row.device}</td><td>${row.condition}</td><td>${row.offer}</td><td><span class="badges">${row.status}</span></td>`;
      tbody.appendChild(tr);
    });

    const alertHolder = document.getElementById("alerts");
    alertFeed.forEach((alert) => {
      const block = document.createElement("div");
      block.className = "alert";
      block.innerHTML = `<strong>${alert.title}</strong><button>${alert.action}</button>`;
      alertHolder.appendChild(block);
    });

    const automationHolder = document.getElementById("automationList");
    automations.forEach((automation) => {
      const row = document.createElement("div");
      row.className = "automation-item";
      const toggle = document.createElement("div");
      toggle.className = "toggle";
      toggle.dataset.active = automation.active;
      toggle.role = "switch";
      toggle.tabIndex = 0;
      toggle.setAttribute("aria-checked", automation.active);
      toggle.addEventListener("click", () => {
        const newState = toggle.dataset.active !== "true";
        toggle.dataset.active = newState;
        toggle.setAttribute("aria-checked", newState);
      });
      toggle.addEventListener("keypress", (e) => {
        if (e.key === " " || e.key === "Enter") {
          e.preventDefault();
          toggle.click();
        }
      });
      row.innerHTML = `<label>${automation.name}</label>`;
      row.appendChild(toggle);
      automationHolder.appendChild(row);
    });

    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
<!-- <script src="/assets/js/ship48-banner.js" defer></script> -->  <script type="module" src="/assets/js/global-auth.js" defer></script>
</body>
</html>
