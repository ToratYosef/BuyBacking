<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecondHandCell - Sell Your iPhone</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Tailwind slate-50 */
            color: #1e293b; /* Tailwind slate-800 */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .homepage-card-link:hover .homepage-card-inner,
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* Tailwind shadow-2xl */
        }
        .homepage-card-inner, .feature-card {
             transition: all 0.3s ease-in-out;
        }
        .phone-card-link:hover .phone-card-inner {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* Tailwind shadow-lg */
        }
        /* Styles for the circular monogram */
        .user-monogram {
            display: flex; align-items: center; justify-content: center;
            width: 2.5rem; height: 2.5rem;
            border-radius: 9999px;
            background-color: #dbeafe; color: #1d4ed8; /* blue-100, blue-700 */
            font-weight: 700; font-size: 1.125rem;
            cursor: pointer; user-select: none;
        }
        /* Dropdown styles */
        .auth-dropdown {
            position: absolute; right: 0; margin-top: 0.5rem;
            width: 12rem; background-color: white;
            border-radius: 0.375rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding-top: 0.25rem; padding-bottom: 0.25rem;
            z-index: 50;
        }
        /* Modal specific styles */
        .modal {
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
            opacity: 0; visibility: hidden;
        }
        .modal.is-visible {
            opacity: 1; visibility: visible;
        }
        .modal-content {
            transform: translateY(-20px);
            transition: transform 0.3s ease-out;
        }
        .modal.is-visible .modal-content {
            transform: translateY(0);
        }
        /* Button styles for Google/Email login */
        .btn-google-style {
            display: flex; align-items: center; justify-content: center;
            width: 100%; background-color: white; color: #475569;
            padding: 0.75rem 1rem; border-radius: 0.5rem;
            border: 1px solid #cbd5e1; font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            cursor: pointer;
        }
        .btn-google-style:hover { background-color: #f8fafc; }
        .btn-dark-slate {
            width: 100%; background-color: #1e293b; color: white;
            padding: 0.75rem 1rem; border-radius: 0.5rem;
            font-weight: 600; transition: all 0.3s ease;
            border: none; cursor: pointer;
        }
        .btn-dark-slate:hover { background-color: #0f172a; }
        .btn-red-logout {
            display: block; width: 100%; text-align: left;
            padding: 0.5rem 1rem; font-size: 0.875rem; color: #dc2626;
            background-color: transparent; border: none;
            transition: background-color 0.2s ease; cursor: pointer;
        }
        .btn-red-logout:hover { background-color: #fef2f2; }

        /* Chat Widget Styles */
        #chat-widget-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
        }
        #chat-open-btn {
            background-color: #2563eb; /* blue-600 */
            color: white;
            width: 4rem;
            height: 4rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: transform 0.2s ease-in-out;
        }
        #chat-open-btn:hover {
            transform: scale(1.1);
        }
        #chat-window {
            position: absolute;
            bottom: 5rem;
            right: 0;
            width: 24rem;
            height: 32rem;
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }
        #chat-window.is-visible {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
        .prose {
            max-width: 65ch;
            color: #334155; /* slate-700 */
        }
        .prose h3 {
            font-size: 1.125rem;
            font-weight: 700;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        .prose p, .prose ul {
            margin-bottom: 1em;
        }
        .prose ul {
            list-style-position: inside;
            padding-left: 1em;
        }
        .prose li {
             margin-bottom: 0.5em;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">

    <!-- HEADER -->
    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex-1">
                <a href="https://secondhandcell.com/index.html" class="h-16 inline-block">
                    <img src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/assets/logo.png" alt="SecondHandCell Logo" class="h-full w-auto">
                </a>
            </div>
            <div class="hidden md:flex flex-col items-center flex-1">
                <div class="text-2xl font-extrabold text-slate-800">SecondHandCell</div>
                <p class="text-sm text-slate-500 -mt-1">Turn Your Old Phone into Cash!</p>
            </div>
            <nav class="flex items-center space-x-4 flex-1 justify-end">
                <div id="authStatusContainer" class="relative inline-block">
                    <a href="#" id="loginNavBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-300 shadow-sm">Login/Sign Up</a>
                    <div id="userMonogram" class="user-monogram hidden"></div>
                    <div id="authDropdown" class="auth-dropdown hidden">
                        <a href="my-account.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">My Account</a>
                        <button id="logoutBtn" class="btn-red-logout">Logout</button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content - iPhone Models Listing -->
    <main class="flex-grow container mx-auto px-4 py-12">
        <h1 class="text-4xl font-bold text-center text-gray-800 mb-10">Sell Your iPhone</h1>
        <p class="text-lg text-center text-gray-600 mb-12">Select your iPhone model to get an instant quote and turn it into cash!</p>

        <!-- BANNER SECTION -->
        <section class="bg-slate-800 text-white rounded-lg mb-12">
            <div class="container mx-auto px-4 py-4 text-center">
                <p class="font-semibold">Important: We only accept devices that are fully paid off. We do not purchase devices that are blacklisted, reported lost/stolen, or have an outstanding balance.</p>
            </div>
        </section>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-8">

            <!-- iPhone 16 Pro Max -->
            <a href="iphone-16-pro-max.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i16pm_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i16pm" alt="iPhone 16 Pro Max" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 16 Pro Max</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $800</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 16 Pro -->
            <a href="iphone-16-pro.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i16p_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i16p" alt="iPhone 16 Pro" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 16 Pro</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $750</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 16 -->
            <a href="iphone-16.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i16_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i16" alt="iPhone 16" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 16</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $650</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 16 Plus -->
            <a href="iphone-16-plus.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i16pl_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i16pl" alt="iPhone 16 Plus" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 16 Plus</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $600</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 16 SE -->
            <a href="iphone-16-se.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i16e_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i16e" alt="iPhone 16 SE" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 16 SE</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $450</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 15 Pro Max -->
            <a href="iphone-15-pro-max.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i15pm_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i15pm" alt="iPhone 15 Pro Max" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 15 Pro Max</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $700</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 15 Pro -->
            <a href="iphone-15-pro.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i15p_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i15p" alt="iPhone 15 Pro" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 15 Pro</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $650</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 15 -->
            <a href="iphone-15.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i15_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i15" alt="iPhone 15" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 15</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $550</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 15 Plus -->
            <a href="iphone-15-plus.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i15pl_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i15pl" alt="iPhone 15 Plus" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 15 Plus</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $500</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 14 Pro Max -->
            <a href="iphone-14-pro-max.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i14pm_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i14pm" alt="iPhone 14 Pro Max" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 14 Pro Max</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $500</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 14 Pro -->
            <a href="iphone-14-pro.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i14p_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i14p" alt="iPhone 14 Pro" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 14 Pro</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $450</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 14 -->
            <a href="iphone-14.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i14_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i14" alt="iPhone 14" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 14</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $380</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 14 Plus -->
            <a href="iphone-14-plus.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i14pl_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i14pl" alt="iPhone 14 Plus" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 14 Plus</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $350</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 13 Pro Max -->
            <a href="iphone-13-pro-max.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i13pm_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i13pm" alt="iPhone 13 Pro Max" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 13 Pro Max</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $400</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 13 Pro -->
            <a href="iphone-13-pro.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i13p_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i13p" alt="iPhone 13 Pro" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 13 Pro</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $350</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 13 -->
            <a href="iphone-13.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i13_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i13" alt="iPhone 13" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 13</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $300</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 13 mini -->
            <a href="iphone-13-mini.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i13m_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i13m" alt="iPhone 13 mini" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 13 mini</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $280</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 12 Pro Max -->
            <a href="iphone-12-pro-max.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i12pm_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i12pm" alt="iPhone 12 Pro Max" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 12 Pro Max</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $350</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 12 Pro -->
            <a href="iphone-12-pro.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i12p_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i12p" alt="iPhone 12 Pro" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 12 Pro</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $300</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 12 -->
            <a href="iphone-12.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i12_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i12" alt="iPhone 12" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 12</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $250</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 12 mini -->
            <a href="iphone-12-mini.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i12m_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i12m" alt="iPhone 12 mini" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 12 mini</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $230</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 11 Pro Max -->
            <a href="iphone-11-pro-max.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i11pm_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i11pm" alt="iPhone 11 Pro Max" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 11 Pro Max</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $300</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 11 Pro -->
            <a href="iphone-11-pro.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i11p_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i11p" alt="iPhone 11 Pro" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 11 Pro</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $280</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone 11 -->
            <a href="iphone-11.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="i11_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/i11" alt="iPhone 11" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone 11</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $220</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone SE (3rd Gen) -->
            <a href="iphone-se-3rd-gen.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="ise3_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/ise3" alt="iPhone SE (3rd Gen)" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone SE (3rd Gen)</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $300</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

            <!-- iPhone SE (2nd Gen) -->
            <a href="iphone-se-2nd-gen.html" class="phone-card-link">
                <div class="phone-card-inner bg-white p-6 rounded-xl shadow-lg text-center flex flex-col h-full transition duration-300">
                    <img id="ise2_img" src="" data-base-src="https://raw.githubusercontent.com/ToratYosef/BuyBacking/refs/heads/main/iphone/assets/ise2" alt="iPhone SE (2nd Gen)" class="mx-auto mb-4 rounded-lg" width="680" height="528">
                    <h3 class="text-xl font-semibold mb-2">iPhone SE (2nd Gen)</h3>
                    <p class="text-blue-600 font-bold mb-4">Starting from $200</p>
                    <span class="bg-blue-600 text-white px-6 py-2 rounded-full font-medium mt-auto w-full group-hover:bg-blue-700 transition-colors duration-300">Sell This</span>
                </div>
            </a>

        </div>
    </main>

    <!-- FOOTER -->
    <footer class="bg-slate-800 text-white mt-8">
        <div class="container mx-auto px-4 py-12">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 grid grid-cols-1 sm:grid-cols-3 gap-8">
                    <div><h3 class="text-xl font-bold mb-4">SecondHandCell</h3><p class="text-slate-400">Your trusted partner for selling used tech. Quick quotes, fair prices, and hassle-free service.</p></div>
                    <div><h3 class="text-xl font-bold mb-4">Quick Links</h3><ul class="space-y-2"><li><a href="#" class="text-slate-400 hover:text-white transition duration-300">Home</a></li><li><a href="#" id="aboutUsLink" class="text-slate-400 hover:text-white transition duration-300">About Us</a></li><li><a href="#" id="privacyPolicyLink" class="text-slate-400 hover:text-white transition duration-300">Privacy Policy</a></li><li><a href="#" id="termsAndConditionsLink" class="text-slate-400 hover:text-white transition duration-300">Terms & Conditions</a></li></ul></div>
                    <div><h3 class="text-xl font-bold mb-4">Contact Us</h3><p class="text-slate-400">Email: support@secondhandcell.com</p><p class="text-slate-400">Phone: (123) 456-7890</p></div>
                </div>
                <div class="bg-slate-700 p-6 rounded-lg">
                    <h3 class="text-xl font-bold mb-2 text-white">Stay Updated</h3>
                    <p class="text-slate-300 mb-4">Sign up for promos, price increases, and more!</p>
                    <form id="footerEmailSignupForm" class="flex flex-col sm:flex-row gap-2">
                        <label for="footerPromoEmail" class="sr-only">Email Address</label>
                        <input type="email" id="footerPromoEmail" placeholder="Enter your email" class="w-full flex-grow border border-slate-400 bg-slate-800 text-white p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-300 shadow-sm">Sign Up</button>
                    </form>
                    <div id="footerSignupMessage" class="mt-3 text-sm text-center"></div>
                </div>
            </div>
            <div class="border-t border-slate-700 mt-8 pt-6 text-center text-slate-400 text-sm"><p>&copy; 2025 SecondHandCell. All rights reserved.</p></div>
        </div>
    </footer>

    <!-- MODALS -->
    <!-- Login Modal -->
    <div id="loginModal" class="modal fixed inset-0 z-50 flex items-center justify-center p-4" style="background-color: rgba(0, 0, 0, 0.6);"><div class="bg-white rounded-lg shadow-2xl w-full max-w-md p-6 relative modal-content"><button class="close-modal-btn absolute top-3 right-3 text-slate-400 hover:text-slate-600 transition-colors duration-200"><i class="fa-solid fa-xmark text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800 mb-6 text-center">Your SecondHandCell Account</h2><div class="flex border-b border-slate-200 mb-6"><button id="loginTabBtn" class="flex-1 py-3 text-center text-lg font-medium border-b-2 border-transparent text-slate-500 hover:text-blue-600 hover:border-blue-600 transition-colors duration-200">Login</button><button id="signupTabBtn" class="flex-1 py-3 text-center text-lg font-medium border-b-2 border-transparent text-slate-500 hover:text-blue-600 hover:border-blue-600 transition-colors duration-200">Sign Up</button></div><form id="loginForm" class="space-y-4"><p class="text-slate-600 text-center">Log in to continue with your order.</p><button type="button" id="googleLoginBtn" class="btn-google-style"><img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google icon" class="w-5 h-5 mr-3">Login with Google</button><div class="text-center text-slate-500 relative my-4"><span class="bg-white px-2 z-10 relative">or</span><hr class="absolute inset-0 top-1/2 border-t border-slate-200"></div><div><label for="loginEmail" class="sr-only">Email Address</label><input type="email" id="loginEmail" placeholder="Email Address" class="w-full border border-slate-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></div><div><label for="loginPassword" class="sr-only">Password</label><input type="password" id="loginPassword" placeholder="Password" class="w-full border border-slate-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" autocomplete="current-password"></div><button type="submit" id="emailLoginBtn" class="btn-dark-slate">Login</button><p class="text-center text-sm text-slate-600">Forgot your password? <a href="#" id="forgotPasswordLink" class="text-blue-600 font-semibold hover:underline">Reset it here</a></p></form><form id="signupForm" class="space-y-4 hidden"><p class="text-slate-600 text-center">Create an account to complete your order.</p><button type="button" id="googleSignupBtn" class="btn-google-style"><img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google icon" class="w-5 h-5 mr-3">Sign Up with Google</button><div class="text-center text-slate-500 relative my-4"><span class="bg-white px-2 z-10 relative">or</span><hr class="absolute inset-0 top-1/2 border-t border-slate-200"></div><div><label for="signupName" class="sr-only">Full Name</label><input type="text" id="signupName" placeholder="Full Name" class="w-full border border-slate-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></div><div><label for="signupEmail" class="sr-only">Email Address</label><input type="email" id="signupEmail" placeholder="Email Address" class="w-full border border-slate-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></div><div><label for="signupPassword" class="sr-only">Password</label><input type="password" id="signupPassword" placeholder="Password" class="w-full border border-slate-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" autocomplete="new-password"></div><button type="submit" id="emailSignupBtn" class="btn-dark-slate">Sign Up</button><p class="text-center text-sm text-slate-600">Already have an account? <a href="#" id="switchToLogin" class="text-blue-600 font-semibold hover:underline">Log in here</a></p></form><form id="forgotPasswordForm" class="space-y-4 hidden"><p class="text-slate-600 text-center">Enter your email to receive a password reset link.</p><div><label for="forgotEmail" class="sr-only">Email Address</label><input type="email" id="forgotEmail" placeholder="Email Address" class="w-full border border-slate-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></div><button type="submit" id="sendResetEmailBtn" class="btn-dark-slate">Send Reset Email</button><p class="text-center text-sm text-slate-600">Remember your password? <a href="#" id="returnToLogin" class="text-blue-600 font-semibold hover:underline">Return to Login</a></p></form><div id="authMessage" class="mt-4 p-3 rounded-lg text-sm text-center hidden w-full"></div></div></div>
    <!-- About Us Modal -->
    <div id="aboutUsModal" class="modal fixed inset-0 z-50 flex items-center justify-center p-4" style="background-color: rgba(0, 0, 0, 0.6);"><div class="bg-white rounded-lg shadow-2xl w-full max-w-2xl p-6 relative modal-content"><button class="close-modal-btn absolute top-3 right-3 text-slate-400 hover:text-slate-600 transition-colors duration-200"><i class="fa-solid fa-xmark text-xl"></i></button><h2 class="text-2xl font-bold text-slate-800 mb-4">About Us</h2><p class="text-slate-600">Welcome to SecondHandCell, where we believe in giving old tech a new life. Our mission is to make selling your used devices as simple, safe, and rewarding as possible. We offer competitive prices, a hassle-free process, and a commitment to sustainability.</p></div></div>
    <!-- Privacy Policy Modal -->
    <div id="privacyPolicyModal" class="modal fixed inset-0 z-50 flex items-center justify-center p-4" style="background-color: rgba(0, 0, 0, 0.6);"><div class="bg-white rounded-lg shadow-2xl w-full max-w-3xl p-8 relative modal-content"><button class="close-modal-btn absolute top-4 right-4 text-slate-400 hover:text-slate-600 transition-colors duration-200"><i class="fa-solid fa-xmark text-xl"></i></button><div class="prose max-h-[80vh] overflow-y-auto pr-4"><h2 class="text-2xl font-bold text-slate-800 mb-4">Privacy Policy</h2><p><strong>Last Updated: August 27, 2025</strong></p><p>SecondHandCell ("we," "us," or "our") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website.</p><h3>Information We Collect</h3><p>We may collect personal information from you such as your name, email address, postal address, phone number, and payment information (e.g., Venmo, Zelle, or PayPal details). We also collect information about the device you are selling, including its model, serial number, and condition.</p><h3>How We Use Your Information</h3><p>We use the information we collect to: process your transactions; send you shipping kits and communicate about your order status; process payments; respond to customer service requests; send you marketing and promotional communications, with your consent.</p><h3>Data Security and Wiping</h3><p>We implement a variety of security measures to maintain the safety of your personal information. All devices sold to us undergo a certified, multi-pass data-wiping process to ensure your personal information is professionally and permanently erased.</p><h3>Disclosure of Your Information</h3><p>We do not sell, trade, or otherwise transfer to outside parties your Personally Identifiable Information except to trusted third parties who assist us in operating our website, conducting our business, or servicing you (such as shipping carriers), so long as those parties agree to keep this information confidential.</p><h3>Your Consent</h3><p>By using our site, you consent to our website's privacy policy.</p></div></div></div>
    <!-- Terms & Conditions Modal -->
    <div id="termsAndConditionsModal" class="modal fixed inset-0 z-50 flex items-center justify-center p-4" style="background-color: rgba(0, 0, 0, 0.6);"><div class="bg-white rounded-lg shadow-2xl w-full max-w-3xl p-8 relative modal-content"><button class="close-modal-btn absolute top-4 right-4 text-slate-400 hover:text-slate-600 transition-colors duration-200"><i class="fa-solid fa-xmark text-xl"></i></button><div class="prose max-h-[80vh] overflow-y-auto pr-4"><h2 class="text-2xl font-bold text-slate-800 mb-4">Terms & Conditions</h2><p><strong>Last Updated: August 27, 2025</strong></p><p>Please read these Terms and Conditions ("Terms") carefully before using the SecondHandCell website ("Service") operated by us.</p><h3>1. User Obligations</h3><p>By using the Service, you represent and warrant that:</p><ul><li>You are the legal owner of the device you are selling.</li><li>The device is not reported as lost or stolen, and its IMEI is not blacklisted.</li><li>The device has no outstanding balance and is not subject to any financing or lease agreement.</li><li>All information you provide about the device is accurate and truthful.</li></ul><h3>2. The Offer Process</h3><ul><li>The initial quote provided on our website is an estimate based on the information you provide.</li><li>Upon receiving your device, we will conduct a thorough inspection. If the device's condition differs from what was described, we will issue a revised offer via email.</li><li><strong>You have seven (7) days to accept or decline the revised offer. If you do not respond within this 7-day period, the revised offer will be automatically accepted on your behalf, and we will proceed with payment.</strong></li><li>Once an offer (initial or revised) is accepted, it is locked in and final. There is no option for a re-offer or to have the device returned.</li></ul><h3>3. Shipping and Risk of Loss</h3><p>We provide a prepaid shipping label and materials. SecondHandCell is not responsible for any damage or loss that occurs before the device is received and scanned by our designated shipping carrier.</p><h3>4. Limitation of Liability</h3><p>In no event shall SecondHandCell, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your access to or use of or inability to access or use the Service.</p></div></div></div>

    <!-- CHAT WIDGET -->
    <div id="chat-widget-container"><div id="chat-window"><div class="bg-blue-700 text-white p-4 flex justify-between items-center"><h3 class="font-bold text-lg">Customer Support</h3><button id="chat-close-btn" class="text-white hover:text-blue-200"><i class="fa-solid fa-xmark text-xl"></i></button></div><div id="chat-messages" class="flex-1 p-4 overflow-y-auto bg-slate-50"></div><div class="p-4 border-t border-slate-200"><input type="text" id="chat-input" placeholder="Type your message..." class="w-full border border-slate-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></div></div><button id="chat-open-btn"><i class="fa-solid fa-comments text-3xl"></i></button></div>

    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signOut, onAuthStateChanged, signInWithPopup, GoogleAuthProvider, signInWithEmailAndPassword, createUserWithEmailAndPassword, updateProfile, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAmUGWbpbJIWLrBMJpZb8iMpFt-uc24J0k",
            authDomain: "buyback-a0f05.firebaseapp.com",
            projectId: "buyback-a0f05",
            storageBucket: "buyback-a0f05.appspot.com",
            messagingSenderId: "876430429098",
            appId: "1:876430429098:web:f6dd64b1960d90461979d3",
            measurementId: "G-6WWQN44JHT"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        document.addEventListener('DOMContentLoaded', function() {
            // --- DYNAMIC IMAGE LOADING LOGIC ---
            function loadImageWithFallback(imgElement) {
                const baseSrc = imgElement.dataset.baseSrc;
                if (!baseSrc) return;
                const extensions = ['.webp', '.avif', '.png', '.jpeg', '.jpg'];
                let current = 0;
                function tryLoad() {
                    if (current >= extensions.length) {
                        if (imgElement.id.includes('_cat_img')) { imgElement.src = `https://placehold.co/150x150/e0e7ff/4338ca?text=Category`; } 
                        else { imgElement.src = `https://placehold.co/200x200/f0f4ff/6366f1?text=No+Image`; }
                        imgElement.alt = "Image not available";
                        return;
                    }
                    const testSrc = baseSrc + extensions[current];
                    const img = new Image();
                    img.onload = () => { imgElement.src = testSrc; };
                    img.onerror = () => { current++; tryLoad(); };
                    img.src = testSrc;
                }
                tryLoad();
            }
            document.querySelectorAll('img[data-base-src]').forEach(loadImageWithFallback);

            // --- MODAL & CHAT LOGIC ---
            const modals = document.querySelectorAll('.modal');
            const openModal = (modalId) => document.getElementById(modalId)?.classList.add('is-visible');
            const closeModal = (modal) => modal.classList.remove('is-visible');

            document.getElementById('loginNavBtn').addEventListener('click', (e) => { e.preventDefault(); openModal('loginModal'); });
            document.getElementById('aboutUsLink').addEventListener('click', (e) => { e.preventDefault(); openModal('aboutUsModal'); });
            document.getElementById('privacyPolicyLink').addEventListener('click', (e) => { e.preventDefault(); openModal('privacyPolicyModal'); });
            document.getElementById('termsAndConditionsLink').addEventListener('click', (e) => { e.preventDefault(); openModal('termsAndConditionsLink'); });

            modals.forEach(modal => {
                modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(modal); });
                modal.querySelector('.close-modal-btn')?.addEventListener('click', () => closeModal(modal));
            });

            const chatWindow = document.getElementById('chat-window');
            const chatOpenBtn = document.getElementById('chat-open-btn');
            const chatCloseBtn = document.getElementById('chat-close-btn');
            const chatMessages = document.getElementById('chat-messages');

            chatOpenBtn.addEventListener('click', () => {
                chatWindow.classList.add('is-visible');
                const user = auth.currentUser;
                const userName = user && user.displayName ? user.displayName.split(' ')[0] : 'there';
                chatMessages.innerHTML = `<div class="bg-slate-200 p-3 rounded-lg self-start max-w-xs">Hi ${userName}, what can I help you with today?</div>`;
            });
            chatCloseBtn.addEventListener('click', () => chatWindow.classList.remove('is-visible'));

            // --- EMAIL SIGNUP FORM LOGIC ---
            const footerEmailSignupForm = document.getElementById('footerEmailSignupForm');
            const footerSignupMessage = document.getElementById('footerSignupMessage');
            footerEmailSignupForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = document.getElementById('footerPromoEmail').value;
                footerSignupMessage.textContent = 'Submitting...';
                footerSignupMessage.className = 'mt-3 text-sm text-center text-blue-300';
                
                try {
                    await addDoc(collection(db, "signed_up_emails"), {
                        email: email,
                        timestamp: new Date()
                    });
                    footerSignupMessage.textContent = 'Success! Thanks for signing up.';
                    footerSignupMessage.className = 'mt-3 text-sm text-center text-green-300';
                    footerEmailSignupForm.reset();
                } catch (error) {
                    console.error("Error adding document: ", error);
                    footerSignupMessage.textContent = 'Error: Could not sign up.';
                    footerSignupMessage.className = 'mt-3 text-sm text-center text-red-300';
                }
            });

            // --- AUTH LOGIC ---
            const authStatusContainer = document.getElementById('authStatusContainer');
            const userMonogram = document.getElementById('userMonogram');
            const authDropdown = document.getElementById('authDropdown');
            const logoutBtn = document.getElementById('logoutBtn');
            const loginTabBtn = document.getElementById('loginTabBtn');
            const signupTabBtn = document.getElementById('signupTabBtn');
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');
            const forgotPasswordForm = document.getElementById('forgotPasswordForm');
            const authMessage = document.getElementById('authMessage');

            const showTab = (tabName) => {
                authMessage.classList.add('hidden');
                [loginForm, signupForm, forgotPasswordForm].forEach(form => form.classList.add('hidden'));
                [loginTabBtn, signupTabBtn].forEach(btn => {
                    btn.classList.remove('border-blue-600', 'text-blue-600');
                    btn.classList.add('border-transparent', 'text-slate-500');
                });
                if (tabName === 'login') { loginForm.classList.remove('hidden'); loginTabBtn.classList.add('border-blue-600', 'text-blue-600'); } 
                else if (tabName === 'signup') { signupForm.classList.remove('hidden'); signupTabBtn.classList.add('border-blue-600', 'text-blue-600'); } 
                else if (tabName === 'forgotPassword') { forgotPasswordForm.classList.remove('hidden'); }
            };

            const showAuthMessage = (msg, type) => {
                authMessage.textContent = msg;
                authMessage.className = 'mt-4 p-3 rounded-lg text-sm text-center w-full';
                if (type === 'error') authMessage.classList.add('bg-red-100', 'text-red-700');
                else if (type === 'success') authMessage.classList.add('bg-green-100', 'text-green-700');
                else authMessage.classList.add('bg-blue-100', 'text-blue-700');
            };

            loginTabBtn.addEventListener('click', () => showTab('login'));
            signupTabBtn.addEventListener('click', () => showTab('signup'));
            document.getElementById('switchToLogin').addEventListener('click', (e) => { e.preventDefault(); showTab('login'); });
            document.getElementById('forgotPasswordLink')?.addEventListener('click', (e) => { e.preventDefault(); showTab('forgotPassword'); });
            document.getElementById('returnToLogin')?.addEventListener('click', (e) => { e.preventDefault(); showTab('login'); });

            const googleProvider = new GoogleAuthProvider();
            const signInWithGoogle = async () => {
                try {
                    showAuthMessage('Redirecting to Google...', 'info');
                    await signInWithPopup(auth, googleProvider);
                } catch (error) { showAuthMessage(`Google sign-in failed: ${error.message}`, 'error'); }
            };
            document.getElementById('googleLoginBtn').addEventListener('click', signInWithGoogle);
            document.getElementById('googleSignupBtn').addEventListener('click', signInWithGoogle);

            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                try {
                    showAuthMessage('Logging in...', 'info');
                    await signInWithEmailAndPassword(auth, email, password);
                } catch (error) { showAuthMessage(`Login failed: ${error.message}`, 'error'); }
            });

            signupForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const name = document.getElementById('signupName').value;
                const email = document.getElementById('signupEmail').value;
                const password = document.getElementById('signupPassword').value;
                if (password.length < 6) { showAuthMessage('Password must be at least 6 characters.', 'error'); return; }
                try {
                    showAuthMessage('Creating account...', 'info');
                    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                    await updateProfile(userCredential.user, { displayName: name });
                } catch (error) { showAuthMessage(`Sign up failed: ${error.message}`, 'error'); }
            });
            
            forgotPasswordForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = document.getElementById('forgotEmail').value;
                try {
                    showAuthMessage('Sending reset email...', 'info');
                    await sendPasswordResetEmail(auth, email);
                    showAuthMessage('Password reset email sent! Check your inbox.', 'success');
                } catch (error) { showAuthMessage(`Failed to send email: ${error.message}`, 'error'); }
            });

            onAuthStateChanged(auth, (user) => {
                if (user) {
                    document.getElementById('loginNavBtn').classList.add('hidden');
                    userMonogram.classList.remove('hidden');
                    const displayName = user.displayName;
                    const email = user.email;
                    let initials = displayName ? displayName.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2) : (email ? email.charAt(0).toUpperCase() : '');
                    userMonogram.textContent = initials;
                    closeModal(document.getElementById('loginModal'));
                } else {
                    document.getElementById('loginNavBtn').classList.remove('hidden');
                    userMonogram.classList.add('hidden');
                    authDropdown.classList.add('hidden');
                }
            });

            userMonogram.addEventListener('click', (e) => { e.stopPropagation(); authDropdown.classList.toggle('hidden'); });
            document.addEventListener('click', (e) => { if (!authStatusContainer.contains(e.target)) { authDropdown.classList.add('hidden'); } });
            logoutBtn.addEventListener('click', () => signOut(auth));
        });
    </script>
</body>
</html>
